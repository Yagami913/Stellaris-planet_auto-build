print_scope_effect_mine = {
	log = "------------------------------"
	log = "- Printing the current scopes (trigger) -"
	log = "- This: [This.GetName]"
	log = "- Root: [Root.GetName]"
	log = "- Prev: [Prev.GetName]"
	log = "- PrevPrev: [Prev.Prev.GetName]"
	log = "- PrevPrevPrev: [Prev.Prev.Prev.GetName]"
	log = "- PrevPrevPrevPrev: [Prev.Prev.Prev.Prev.GetName]"
	log = "- From: [From.GetName]"
	log = "- FromFrom: [From.From.GetName]"
	log = "- FromFromFrom: [From.From.From.GetName]"
	log = "- FromFromFromFrom: [From.From.From.From.GetName]"
	log = "- This's Solar System: [This.GetStarName]"
	log = "- This's Planet: [This.Planet.GetName]"
	log = "- This's Sector: [This.Sector.GetName]"
	log = "- Root's Solar System: [Root.GetStarName]"
	log = "- Root's Owner's Name: [Root.Owner.GetName]"
	log = "- Root's Owner's Capital's Name: [Root.Owner.Capital.GetName]"
	log = "------------------------------"
}

add_building_by_flag = {
	if = {
		limit = { free_building_slots > 0 }
		if = {
			limit = { has_planet_flag = "building_robot_assembly_plant_flag" }
			add_building = "building_robot_assembly_plant"
			remove_planet_flag = "building_robot_assembly_plant_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_nanite_transmuter_flag" }
			add_building = "building_nanite_transmuter"
			remove_planet_flag = "building_nanite_transmuter_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_ministry_production_flag" }
			add_building = "building_ministry_production"
			remove_planet_flag = "building_ministry_production_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_production_center_flag" }
			add_building = "building_production_center"
			remove_planet_flag = "building_production_center_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_chemical_plant_flag" }
			add_building = "building_chemical_plant"
			remove_planet_flag = "building_chemical_plant_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_refinery_flag" }
			add_building = "building_refinery"
			remove_planet_flag = "building_refinery_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_crystal_plant_flag" }
			add_building = "building_crystal_plant"
			remove_planet_flag = "building_crystal_plant_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_foundry_1_flag" }
			add_building = "building_foundry_1"
			remove_planet_flag = "building_foundry_1_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_factory_1_flag" }
			add_building = "building_factory_1"
			remove_planet_flag = "building_factory_1_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_machine_assembly_plant_flag" }
			add_building = "building_machine_assembly_plant"
			remove_planet_flag = "building_machine_assembly_plant_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_noble_estates_flag" }
			add_building = "building_noble_estates"
			remove_planet_flag = "building_noble_estates_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_bureaucratic_complex_flag" }
			add_building = "building_bureaucratic_complex"
			remove_planet_flag = "building_bureaucratic_complex_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_slave_processing_flag" }
			add_building = "building_slave_processing"
			remove_planet_flag = "building_slave_processing_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_precinct_house_flag" }
			add_building = "building_precinct_house"
			remove_planet_flag = "building_precinct_house_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_sentinel_posts_flag" }
			add_building = "building_sentinel_posts"
			remove_planet_flag = "building_sentinel_posts_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_psi_corps_flag" }
			add_building = "building_psi_corps"
			remove_planet_flag = "building_psi_corps_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_clone_vats_flag" }
			add_building = "building_clone_vats"
			remove_planet_flag = "building_clone_vats_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_mote_harvesters_flag" }
			add_building = "building_mote_harvesters"
			remove_planet_flag = "building_mote_harvesters_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_gas_extractors_flag" }
			add_building = "building_gas_extractors"
			remove_planet_flag = "building_gas_extractors_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_crystal_mines_flag" }
			add_building = "building_crystal_mines"
			remove_planet_flag = "building_crystal_mines_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_betharian_power_plant_flag" }
			add_building = "building_betharian_power_plant"
			remove_planet_flag = "building_betharian_power_plant_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_xeno_zoo_flag" }
			add_building = "building_xeno_zoo"
			remove_planet_flag = "building_xeno_zoo_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_military_academy_flag" }
			add_building = "building_military_academy"
			remove_planet_flag = "building_military_academy_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_stronghold_flag" }
			add_building = "building_stronghold"
			remove_planet_flag = "building_stronghold_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_planetary_shield_generator_flag" }
			add_building = "building_planetary_shield_generator"
			remove_planet_flag = "building_planetary_shield_generator_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_autochthon_monument_flag" }
			add_building = "building_autochthon_monument"
			remove_planet_flag = "building_autochthon_monument_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_temple_flag" }
			add_building = "building_temple"
			remove_planet_flag = "building_temple_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_hive_node_flag" }
			add_building = "building_hive_node"
			remove_planet_flag = "building_hive_node_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_uplink_node_flag" }
			add_building = "building_uplink_node"
			remove_planet_flag = "building_uplink_node_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_organic_sanctuary_flag" }
			add_building = "building_organic_sanctuary"
			remove_planet_flag = "building_organic_sanctuary_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_corporate_monument_flag" }
			add_building = "building_corporate_monument"
			remove_planet_flag = "building_corporate_monument_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_commercial_zone_flag" }
			add_building = "building_commercial_zone"
			remove_planet_flag = "building_commercial_zone_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_galactic_stock_exchange_flag" }
			add_building = "building_galactic_stock_exchange"
			remove_planet_flag = "building_galactic_stock_exchange_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_research_lab_1_flag" }
			add_building = "building_research_lab_1"
			remove_planet_flag = "building_research_lab_1_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_institute_flag" }
			add_building = "building_institute"
			remove_planet_flag = "building_institute_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_supercomputer_flag" }
			add_building = "building_supercomputer"
			remove_planet_flag = "building_supercomputer_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_hydroponics_farm_flag" }
			add_building = "building_hydroponics_farm"
			remove_planet_flag = "building_hydroponics_farm_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_food_processing_facility_flag" }
			add_building = "building_food_processing_facility"
			remove_planet_flag = "building_food_processing_facility_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_mineral_purification_plant_flag" }
			add_building = "building_mineral_purification_plant"
			remove_planet_flag = "building_mineral_purification_plant_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_energy_grid_flag" }
			add_building = "building_energy_grid"
			remove_planet_flag = "building_energy_grid_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_resource_silo_flag" }
			add_building = "building_resource_silo"
			remove_planet_flag = "building_resource_silo_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_bio_reactor_flag" }
			add_building = "building_bio_reactor"
			remove_planet_flag = "building_bio_reactor_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_luxury_residence_flag" }
			add_building = "building_luxury_residence"
			remove_planet_flag = "building_luxury_residence_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_communal_housing_flag" }
			add_building = "building_communal_housing"
			remove_planet_flag = "building_communal_housing_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_drone_storage_flag" }
			add_building = "building_drone_storage"
			remove_planet_flag = "building_drone_storage_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_hive_warren_flag" }
			add_building = "building_hive_warren"
			remove_planet_flag = "building_hive_warren_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_holo_theatres_flag" }
			add_building = "building_holo_theatres"
			remove_planet_flag = "building_holo_theatres_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_clinic_flag" }
			add_building = "building_clinic"
			remove_planet_flag = "building_clinic_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_maintenance_depot_flag" }
			add_building = "building_maintenance_depot"
			remove_planet_flag = "building_maintenance_depot_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_spawning_pool_flag" }
			add_building = "building_spawning_pool"
			remove_planet_flag = "building_spawning_pool_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_slave_huts_flag" }
			add_building = "building_slave_huts"
			remove_planet_flag = "building_slave_huts_flag"
		}
		else_if = {
			limit = { has_planet_flag = "building_overseer_homes_flag" }
			add_building = "building_overseer_homes"
			remove_planet_flag = "building_overseer_homes_flag"
		}
	}
	else = {
		set_planet_flag = "pab_refund"
	}
} #done

add_upgraded_building_by_flag = {
	
	if = {
		limit = { has_planet_flag = "building_foundry_2_flag" }
		if = {
			limit = { has_building = "building_foundry_1" }
			remove_building = "building_foundry_1"
			add_building = "building_foundry_2"
			remove_planet_flag = "building_foundry_2_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_foundry_3_flag" }
		if = {
			limit = { has_building = "building_foundry_2" }
			remove_building = "building_foundry_2"
			add_building = "building_foundry_3"
			remove_planet_flag = "building_foundry_3_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_factory_2_flag" }
		if = {
			limit = { has_building = "building_factory_1" }
			remove_building = "building_factory_1"
			add_building = "building_factory_2"
			remove_planet_flag = "building_factory_2_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_factory_3_flag" }
		if = {
			limit = { has_building = "building_factory_2" }
			remove_building = "building_factory_2"
			add_building = "building_factory_3"
			remove_planet_flag = "building_factory_3_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_paradise_dome_flag" }
		if = {
			limit = { has_building = "building_luxury_residence" }
			remove_building = "building_luxury_residence"
			add_building = "building_paradise_dome"
			remove_planet_flag = "building_paradise_dome_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_communal_housing_large_flag" }
		if = {
			limit = { has_building = "building_communal_housing" }
			remove_building = "building_communal_housing"
			add_building = "building_communal_housing_large"
			remove_planet_flag = "building_communal_housing_large_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_drone_megastorage_flag" }
		if = {
			limit = { has_building = "building_drone_storage" }
			remove_building = "building_drone_storage"
			add_building = "building_drone_megastorage"
			remove_planet_flag = "building_drone_megastorage_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_expanded_warren_flag" }
		if = {
			limit = { has_building = "building_hive_warren" }
			remove_building = "building_hive_warren"
			add_building = "building_expanded_warren"
			remove_planet_flag = "building_expanded_warren_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hyper_entertainment_forum_flag" }
		if = {
			limit = { has_building = "building_holo_theatres" }
			remove_building = "building_holo_theatres"
			add_building = "building_hyper_entertainment_forum"
			remove_planet_flag = "building_hyper_entertainment_forum_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hospital_flag" }
		if = {
			limit = { has_building = "building_clinic" }
			remove_building = "building_clinic"
			add_building = "building_hospital"
			remove_planet_flag = "building_hospital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_capital_flag" }
		if = {
			limit = { has_building = "building_colony_shelter" }
			remove_building = "building_colony_shelter"
			add_building = "building_capital"
			remove_planet_flag = "building_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_mineral_purification_hub_flag" }
		if = {
			limit = { has_building = "building_mineral_purification_plant" }
			remove_building = "building_mineral_purification_plant"
			add_building = "building_mineral_purification_hub"
			remove_planet_flag = "building_mineral_purification_hub_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_energy_nexus_flag" }
		if = {
			limit = { has_building = "building_energy_grid" }
			remove_building = "building_energy_grid"
			add_building = "building_energy_nexus"
			remove_planet_flag = "building_energy_nexus_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_food_processing_center_flag" }
		if = {
			limit = { has_building = "building_food_processing_facility" }
			remove_building = "building_food_processing_facility"
			add_building = "building_food_processing_center"
			remove_planet_flag = "building_food_processing_center_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_research_lab_2_flag" }
		if = {
			limit = { has_building = "building_research_lab_1" }
			remove_building = "building_research_lab_1"
			add_building = "building_research_lab_2"
			remove_planet_flag = "building_research_lab_2_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_research_lab_3_flag" }
		if = {
			limit = { has_building = "building_research_lab_2" }
			remove_building = "building_research_lab_2"
			add_building = "building_research_lab_3"
			remove_planet_flag = "building_research_lab_3_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_commercial_megaplex_flag" }
		if = {
			limit = { has_building = "building_commercial_zone" }
			remove_building = "building_commercial_zone"
			add_building = "building_commercial_megaplex"
			remove_planet_flag = "building_commercial_megaplex_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_major_capital_flag" }
		if = {
			limit = { has_building = "building_capital" }
			remove_building = "building_capital"
			add_building = "building_major_capital"
			remove_planet_flag = "building_major_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_system_capital_flag" }
		if = {
			limit = { has_building = "building_major_capital" }
			remove_building = "building_major_capital"
			add_building = "building_system_capital"
			remove_planet_flag = "building_system_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_machine_capital_flag" }
		if = {
			limit = { has_building = "building_deployment_post" }
			remove_building = "building_deployment_post"
			add_building = "building_machine_capital"
			remove_planet_flag = "building_machine_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_machine_major_capital_flag" }
		if = {
			limit = { has_building = "building_machine_capital" }
			remove_building = "building_machine_capital"
			add_building = "building_machine_major_capital"
			remove_planet_flag = "building_machine_major_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_machine_system_capital_flag" }
		if = {
			limit = { has_building = "building_machine_major_capital" }
			remove_building = "building_machine_major_capital"
			add_building = "building_machine_system_capital"
			remove_planet_flag = "building_machine_system_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hive_major_capital_flag" }
		if = {
			limit = { has_building = "building_hive_capital" }
			remove_building = "building_hive_capital"
			add_building = "building_hive_major_capital"
			remove_planet_flag = "building_hive_major_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hab_major_capital_flag" }
		if = {
			limit = { has_building = "building_hab_capital" }
			remove_building = "building_hab_capital"
			add_building = "building_hab_major_capital"
			remove_planet_flag = "building_hab_major_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_resort_major_capital_flag" }
		if = {
			limit = { has_building = "building_resort_capital" }
			remove_building = "building_resort_capital"
			add_building = "building_resort_major_capital"
			remove_planet_flag = "building_resort_major_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_slave_major_capital_flag" }
		if = {
			limit = { has_building = "building_slave_capital" }
			remove_building = "building_slave_capital"
			add_building = "building_slave_major_capital"
			remove_planet_flag = "building_slave_major_capital_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hall_judgment_flag" }
		if = {
			limit = { has_building = "building_precinct_house" }
			remove_building = "building_precinct_house"
			add_building = "building_hall_judgment"
			remove_planet_flag = "building_hall_judgment_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_fortress_flag" }
		if = {
			limit = { has_building = "building_stronghold" }
			remove_building = "building_stronghold"
			add_building = "building_fortress"
			remove_planet_flag = "building_fortress"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_heritage_site_flag" }
		if = {
			limit = { has_building = "building_autochthon_monument" }
			remove_building = "building_autochthon_monument"
			add_building = "building_heritage_site"
			remove_planet_flag = "building_heritage_site_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hypercomms_forum_flag" }
		if = {
			limit = { has_building = "building_heritage_site" }
			remove_building = "building_heritage_site"
			add_building = "building_hypercomms_forum"
			remove_planet_flag = "building_hypercomms_forum_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_autocurating_vault_flag" }
		if = {
			limit = { has_building = "building_hypercomms_forum" }
			remove_building = "building_hypercomms_forum"
			add_building = "building_autocurating_vault"
			remove_planet_flag = "building_autocurating_vault_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_holotemple_flag" }
		if = {
			limit = { has_building = "building_temple" }
			remove_building = "building_temple"
			add_building = "building_holotemple"
			remove_planet_flag = "building_holotemple_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_sacred_nexus_flag" }
		if = {
			limit = { has_building = "building_holotemple" }
			remove_building = "building_holotemple"
			add_building = "building_sacred_nexus"
			remove_planet_flag = "building_sacred_nexus_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_citadel_of_faith_flag" }
		if = {
			limit = { has_building = "building_sacred_nexus" }
			remove_building = "building_sacred_nexus"
			add_building = "building_citadel_of_faith"
			remove_planet_flag = "building_citadel_of_faith_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hive_cluster_flag" }
		if = {
			limit = { has_building = "building_hive_node" }
			remove_building = "building_hive_node"
			add_building = "building_hive_cluster"
			remove_planet_flag = "building_hive_cluster_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_hive_confluence_flag" }
		if = {
			limit = { has_building = "building_hive_cluster" }
			remove_building = "building_hive_cluster"
			add_building = "building_hive_confluence"
			remove_planet_flag = "building_hive_confluence_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_network_junction_flag" }
		if = {
			limit = { has_building = "building_uplink_node" }
			remove_building = "building_uplink_node"
			add_building = "building_network_junction"
			remove_planet_flag = "building_network_junction_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_system_conflux_flag" }
		if = {
			limit = { has_building = "building_network_junction" }
			remove_building = "building_network_junction"
			add_building = "building_system_conflux"
			remove_planet_flag = "building_system_conflux_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_alpha_hub_flag" }
		if = {
			limit = { has_building = "building_system_conflux" }
			remove_building = "building_system_conflux"
			add_building = "building_alpha_hub"
			remove_planet_flag = "building_alpha_hub_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_organic_paradise_flag" }
		if = {
			limit = { has_building = "building_organic_sanctuary" }
			remove_building = "building_organic_sanctuary"
			add_building = "building_organic_paradise"
			remove_planet_flag = "building_organic_paradise_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_corporate_site_flag" }
		if = {
			limit = { has_building = "building_corporate_monument" }
			remove_building = "building_corporate_monument"
			add_building = "building_corporate_site"
			remove_planet_flag = "building_corporate_site_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_corporate_forum_flag" }
		if = {
			limit = { has_building = "building_corporate_site" }
			remove_building = "building_corporate_site"
			add_building = "building_corporate_forum"
			remove_planet_flag = "building_corporate_forum_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
	else_if = {
		limit = { has_planet_flag = "building_corporate_vault_flag" }
		if = {
			limit = { has_building = "building_corporate_forum" }
			remove_building = "building_corporate_forum"
			add_building = "building_corporate_vault"
			remove_planet_flag = "building_corporate_vault_flag"
		}
		else = {
			set_planet_flag = "pab_refund"
		}
	}
} #done

add_disctrict_by_flag = {
	if = {
		limit = { free_district_slots > 0 }
		if = {
			limit = { has_planet_flag = "district_city_flag" }
			add_district = "district_city"
			remove_planet_flag = "district_city_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_hive_flag" }
			add_district = "district_hive"
			remove_planet_flag = "district_hive_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_nexus_flag" }
			add_district = "district_nexus"
			remove_planet_flag = "district_nexus_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_arcology_housing_flag" }
			add_district = "district_arcology_housing"
			remove_planet_flag = "district_arcology_housing_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_arcology_arms_industry_flag" }
			add_district = "district_arcology_arms_industry"
			remove_planet_flag = "district_arcology_arms_industry_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_arcology_civilian_industry_flag" }
			add_district = "district_arcology_civilian_industry"
			remove_planet_flag = "district_arcology_civilian_industry_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_arcology_leisure_flag" }
			add_district = "district_arcology_leisure"
			remove_planet_flag = "district_arcology_leisure_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_generator_flag" }
			add_district = "district_generator"
			remove_planet_flag = "district_generator_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_mining_flag" }
			add_district = "district_mining"
			remove_planet_flag = "district_mining_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_farming_flag" }
			add_district = "district_farming"
			remove_planet_flag = "district_farming_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_generator_uncapped_flag" }
			add_district = "district_generator_uncapped"
			remove_planet_flag = "district_generator_uncapped_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_mining_uncapped_flag" }
			add_district = "district_mining_uncapped"
			remove_planet_flag = "district_mining_uncapped_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_farming_uncapped_flag" }
			add_district = "district_farming_uncapped"
			remove_planet_flag = "district_farming_uncapped_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_hab_housing_flag" }
			add_district = "district_hab_housing"
			remove_planet_flag = "district_hab_housing_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_hab_energy_flag" }
			add_district = "district_hab_energy"
			remove_planet_flag = "district_hab_energy_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_hab_cultural_flag" }
			add_district = "district_hab_cultural"
			remove_planet_flag = "district_hab_cultural_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_hab_science_flag" }
			add_district = "district_hab_science"
			remove_planet_flag = "district_hab_science_flag"
		}
		else_if = {
			limit = { has_planet_flag = "district_hab_commercial_flag" }
			add_district = "district_hab_commercial"
			remove_planet_flag = "district_hab_commercial_flag"
		}
	}
	else = {
		set_planet_flag = "pab_refund"
	}
} #done

remove_blocker_by_flag = {
	every_deposit = {
		if = {
			limit = { 
				PREV = { has_planet_flag = "d_dense_jungle_flag" }	
				is_deposit_type = d_dense_jungle
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_dense_jungle_flag"}
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_toxic_kelp_flag" }	
				is_deposit_type = d_toxic_kelp
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_toxic_kelp_flag"}
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_deep_sinkhole_flag" }	
				is_deposit_type = d_deep_sinkhole
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_deep_sinkhole_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_quicksand_basin_flag" }	
				is_deposit_type = d_quicksand_basin
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_quicksand_basin_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_noxious_swamp_flag" }	
				is_deposit_type = d_noxious_swamp
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_noxious_swamp_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_massive_glacier_flag" }	
				is_deposit_type = d_massive_glacier
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_massive_glacier_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_mountain_range_flag" }	
				is_deposit_type = d_mountain_range
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_mountain_range_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_active_volcano_flag" }	
				is_deposit_type = d_active_volcano
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_active_volcano_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_dangerous_wildlife_blocker_flag" }	
				is_deposit_type = d_dangerous_wildlife_blocker
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_dangerous_wildlife_blocker_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_infestation_flag" }	
				is_deposit_type = d_infestation
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_infestation_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_quarantine_zone_flag" }	
				is_deposit_type = d_quarantine_zone
			}
			clear_blocker = yes
			PREV = {  remove_planet_flag = "d_quarantine_zone_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_slums_flag" }	
				is_deposit_type = d_slums
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_slums_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_crater_flag" }	
				is_deposit_type = d_crater
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_crater_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_sinkhole_subterraneans_flag" }	
				is_deposit_type = d_sinkhole_subterraneans
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_sinkhole_subterraneans_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_dead_subterraneans_flag" }	
				is_deposit_type = d_dead_subterraneans
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_dead_subterraneans_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_failing_infrastructure_flag" }	
				is_deposit_type = d_failing_infrastructure
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_failing_infrastructure_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_decrepit_dwellings_flag" }	
				is_deposit_type = d_decrepit_dwellings
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_decrepit_dwellings_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_tomb_world_ruins_flag" }	
				is_deposit_type = d_tomb_world_ruins
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_tomb_world_ruins_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_tomb_world_wasteland_flag" }	
				is_deposit_type = d_tomb_world_wasteland
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_tomb_world_wasteland_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_machine_empire_ruins_flag" }	
				is_deposit_type = d_machine_empire_ruins
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_machine_empire_ruins_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_exterminators_ruins_flag" }	
				is_deposit_type = d_exterminators_ruins
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_exterminators_ruins_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_former_battlefield_flag" }	
				is_deposit_type = d_former_battlefield
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_former_battlefield_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_strip_mine_flag" }	
				is_deposit_type = d_strip_mine
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_strip_mine_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_unsupervised_settlement_flag" }	
				is_deposit_type = d_unsupervised_settlement
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_unsupervised_settlement_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_collapsed_burrows_flag" }	
				is_deposit_type = d_collapsed_burrows
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_collapsed_burrows_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_assimilators_ruins_flag" }	
				is_deposit_type = d_assimilators_ruins
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_assimilators_ruins_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_fungoid_extermination_flag" }	
				is_deposit_type = d_fungoid_extermination
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_fungoid_extermination_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_exofungus_blocker_flag" }	
				is_deposit_type = d_exofungus_blocker
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_exofungus_blocker_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_egg_cracking_flag" }	
				is_deposit_type = d_egg_cracking
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_egg_cracking_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_radioactive_wasteland_flag" }	
				is_deposit_type = d_radioactive_wasteland
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_radioactive_wasteland_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_bomb_crater_flag" }	
				is_deposit_type = d_bomb_crater
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_bomb_crater_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_city_ruins_flag" }	
				is_deposit_type = d_city_ruins
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_city_ruins_flag" }
		}
		else_if = {
			limit = { 
				PREV = { has_planet_flag = "d_ruined_arcology_flag" }	
				is_deposit_type = d_ruined_arcology
			}
			clear_blocker = yes
			PREV = { remove_planet_flag = "d_ruined_arcology_flag" }
		}
	}
}

remove_money_by_flag = {
	set_variable = {	which = discount value = 0	}
	set_variable = {	which = blocker_discount value = 0	}

	if = {limit = { owner = {has_tradition = "tr_prosperity_sct"} }
		 change_variable = { which = discount value = 1 }
	}
	if = {limit = { owner = {
				OR = {
					has_civic = "civic_machine_builder"
					has_civic = "civic_functional_architecture"
				}}}
		change_variable = { which = discount value = 1 }
	}

	if = {limit = { owner = { has_tradition = tr_domination_adopt } }
		 change_variable = { which = blocker_discount value = 1 }
	}
	if = {limit = { owner = { has_ascension_perk = ap_mastery_of_nature } }
		 change_variable = { which = blocker_discount value = 1 }
	}

	if = {
		limit = {
			OR = {
				has_planet_flag = "building_resource_silo_flag"
				has_planet_flag = "building_stronghold_flag"
				has_planet_flag = "building_autochthon_monument_flag"
				has_planet_flag = "building_temple_flag"
				has_planet_flag = "building_hive_node_flag"
				has_planet_flag = "building_uplink_node_flag"
				has_planet_flag = "building_corporate_monument_flag"
				has_planet_flag = "building_bio_reactor_flag"
				has_planet_flag = "building_maintenance_depot_flag"
				has_planet_flag = "building_slave_huts_flag"
				has_planet_flag = "building_overseer_homes_flag"
				has_planet_flag = "building_clone_vats_flag"
				has_planet_flag = "building_mote_harvesters_flag"
				has_planet_flag = "building_gas_extractors_flag"
				has_planet_flag = "building_crystal_mines_flag"
				has_planet_flag = "building_betharian_power_plant_flag"
				has_planet_flag = "building_xeno_zoo_flag"
				has_planet_flag = "building_food_processing_facility_flag"
			}
		}
		if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { owner = {has_resource = { type = minerals amount > 200 } }}
				owner = {add_resource = {minerals = -200}}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
		}
		else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { owner = { has_resource = { type = minerals amount > 180 } }}
				owner = { add_resource = {minerals = -180}}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
		}
		else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { owner = { has_resource = { type = minerals amount > 160 } }}
				owner = { add_resource = {minerals = -160}}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "district_generator_flag"
				has_planet_flag = "district_mining_flag"
				has_planet_flag = "district_farming_flag"
				has_planet_flag = "district_generator_uncapped_flag"
				has_planet_flag = "district_mining_uncapped_flag"
				has_planet_flag = "district_farming_uncapped_flag"
				has_planet_flag = "building_machine_assembly_plant_flag"
				has_planet_flag = "building_commercial_zone_flag"
				has_planet_flag = "building_hydroponics_farm_flag"
				has_planet_flag = "building_luxury_residence_flag"
				has_planet_flag = "building_communal_housing_flag"
				has_planet_flag = "building_drone_storage_flag"
				has_planet_flag = "building_hive_warren_flag"
				has_planet_flag = "building_holo_theatres_flag"
				has_planet_flag = "building_clinic_flag"
				has_planet_flag = "building_spawning_pool_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 if = {
			 limit = { owner = {has_resource = { type = minerals amount > 300 } }}
			 owner = {add_resource = {minerals = -300}}
		 }
		 else = {
			 set_planet_flag = "pab_not_enough_money"
		 }
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 270 } }}
				 owner = { add_resource = {minerals = -270}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 240 } }}
				 owner = { add_resource = {minerals = -240}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
	 	}
	}	
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_foundry_1_flag"
				has_planet_flag = "building_factory_1_flag"
				has_planet_flag = "building_slave_processing_flag"
				has_planet_flag = "building_precinct_house_flag"
				has_planet_flag = "building_sentinel_posts_flag"
				has_planet_flag = "building_organic_sanctuary_flag"
				has_planet_flag = "building_research_lab_1_flag"
				has_planet_flag = "building_heritage_site_flag"
				has_planet_flag = "building_holotemple_flag"
				has_planet_flag = "building_hive_cluster_flag"
				has_planet_flag = "building_network_junction_flag"
				has_planet_flag = "building_corporate_site_flag"
				has_planet_flag = "building_noble_estates_flag"
				has_planet_flag = "building_military_academy_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 if = {
			 limit = { owner = {has_resource = { type = minerals amount > 400 } }}
			 owner = {add_resource = {minerals = -400}}
		 }
		 else = {
			 set_planet_flag = "pab_not_enough_money"
		 }
		 }
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 360 } }}
				 owner = { add_resource = {minerals = -360}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
		 }
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 320 } }}
				 owner = { add_resource = {minerals = -320}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
		 }
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "district_hab_housing_flag"
				has_planet_flag = "district_hab_energy_flag"
				has_planet_flag = "district_hab_cultural_flag"
				has_planet_flag = "district_hab_science_flag"
				has_planet_flag = "district_hab_commercial_flag"
				has_planet_flag = "building_robot_assembly_plant_flag"
				has_planet_flag = "district_city_flag"
				has_planet_flag = "district_hive_flag"
				has_planet_flag = "district_nexus_flag"
				has_planet_flag = "building_ministry_production_flag"
				has_planet_flag = "building_production_center_flag"
				has_planet_flag = "building_chemical_plant_flag"
				has_planet_flag = "building_refinery_flag"
				has_planet_flag = "building_crystal_plant_flag"
				has_planet_flag = "building_bureaucratic_complex_flag"
				has_planet_flag = "building_psi_corps_flag"
				has_planet_flag = "building_galactic_stock_exchange_flag"
				has_planet_flag = "building_institute_flag"
				has_planet_flag = "building_supercomputer_flag"
				has_planet_flag = "building_capital_flag"
				has_planet_flag = "building_machine_capital_flag"
				has_planet_flag = "building_hab_major_capital_flag"
				has_planet_flag = "building_resort_major_capital_flag"
				has_planet_flag = "building_slave_major_capital_flag"
				has_planet_flag = "building_planetary_shield_generator_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 if = {
			 limit = { owner = {has_resource = { type = minerals amount > 500 } }}
			 owner = {add_resource = {minerals = -500}}
		 }
		 else = {
			 set_planet_flag = "pab_not_enough_money"
		 }
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 450 } }}
				 owner = { add_resource = {minerals = -450}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 450 } }}
				 owner = { add_resource = {minerals = -450}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_hive_major_capital_flag"
				has_planet_flag = "district_arcology_housing_flag"
				has_planet_flag = "district_arcology_arms_industry_flag"
				has_planet_flag = "district_arcology_civilian_industry_flag"
				has_planet_flag = "district_arcology_leisure_flag"
				has_planet_flag = "building_nanite_transmuter_flag"
				has_planet_flag = "building_major_capital_flag"
				has_planet_flag = "building_machine_major_capital_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 if = {
			 limit = { owner = {has_resource = { type = minerals amount > 1000 } }}
			 owner = {add_resource = {minerals = -1000}}
		 }
		 else = {
			 set_planet_flag = "pab_not_enough_money"
		 }
		 }
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 900 } }}
				 owner = { add_resource = {minerals = -900}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
		 }
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 800 } }}
				 owner = { add_resource = {minerals = -800}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
		 }
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_system_capital_flag"
				has_planet_flag = "building_machine_system_capital_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 if = {
			 limit = { owner = {has_resource = { type = minerals amount > 2000 } }}
			 owner = {add_resource = {minerals = -2000}}
		 }
		 else = {
			 set_planet_flag = "pab_not_enough_money"
		 }
		 }
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 1800 } }}
				 owner = { add_resource = {minerals = -1800}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
		 }
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 if = {
				 limit = { owner = { has_resource = { type = minerals amount > 1600 } }}
				 owner = { add_resource = {minerals = -1600}}
			 }
			 else = {
				 set_planet_flag = "pab_not_enough_money"
			 }
		 }
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_autocurating_vault_flag"
				has_planet_flag = "building_citadel_of_faith_flag"
				has_planet_flag = "building_alpha_hub_flag"
				has_planet_flag = "building_corporate_vault_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 1000 } 
						has_resource = { type = rare_crystals amount > 100 } 
					}
				}
				owner = {
					add_resource = { minerals = -1000 }
					add_resource = { rare_crystals = -100}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 900 } 
						has_resource = { type = rare_crystals amount > 90 } 
					}
				}
				owner = {
					add_resource = {minerals = -900}
					add_resource = { rare_crystals = -90}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 800 } 
						has_resource = { type = rare_crystals amount > 80 } 
					}
				}
				owner = {
					add_resource = {minerals = -800}
					add_resource = { rare_crystals = -80}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
		
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_paradise_dome_flag"
				has_planet_flag = "building_communal_housing_large_flag"
				has_planet_flag = "building_drone_megastorage_flag"
				has_planet_flag = "building_expanded_warren_flag"
				has_planet_flag = "building_commercial_megaplex_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 500 } 
						has_resource = { type = rare_crystals amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -500 }
					add_resource = { rare_crystals = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 450 } 
						has_resource = { type = rare_crystals amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -450}
					add_resource = { rare_crystals = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 400 } 
						has_resource = { type = rare_crystals amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -400}
					add_resource = { rare_crystals = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_factory_2_flag"
				has_planet_flag = "building_hypercomms_forum_flag"
				has_planet_flag = "building_sacred_nexus_flag"
				has_planet_flag = "building_hive_confluence_flag"
				has_planet_flag = "building_system_conflux_flag"
				has_planet_flag = "building_corporate_forum_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 600 } 
						has_resource = { type = rare_crystals amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -600 }
					add_resource = { rare_crystals = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 540 } 
						has_resource = { type = rare_crystals amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -540}
					add_resource = { rare_crystals = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 480 } 
						has_resource = { type = rare_crystals amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -480}
					add_resource = { rare_crystals = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_hyper_entertainment_forum_flag"
				has_planet_flag = "building_hospital_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 500 } 
						has_resource = { type = exotic_gases amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -500 }
					add_resource = { exotic_gases = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 450 } 
						has_resource = { type = exotic_gases amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -450}
					add_resource = { exotic_gases = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 400 } 
						has_resource = { type = exotic_gases amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -400}
					add_resource = { exotic_gases = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_research_lab_2_flag"
				has_planet_flag = "building_hall_judgment_flag"
				has_planet_flag = "building_organic_paradise_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 600 } 
						has_resource = { type = exotic_gases amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -600 }
					add_resource = { exotic_gases = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 540 } 
						has_resource = { type = exotic_gases amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -540}
					add_resource = { exotic_gases = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 480 } 
						has_resource = { type = exotic_gases amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -480}
					add_resource = { exotic_gases = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_factory_3_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 800 } 
						has_resource = { type = rare_crystals amount > 100 } 
					}
				}
				owner = {
					add_resource = { minerals = -800 }
					add_resource = { rare_crystals = -100}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 720 } 
						has_resource = { type = rare_crystals amount > 90 } 
					}
				}
				add_resource = {minerals = -720}
				add_resource = { rare_crystals = -90}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = { 
						has_resource = { type = minerals amount > 640 } 
						has_resource = { type = rare_crystals amount > 80 } 
					}
				}
				owner = {
					add_resource = {minerals = -640}
					add_resource = { rare_crystals = -80}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_research_lab_3_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 800 } 
						has_resource = { type = exotic_gases amount > 100 } 
					}
				}
				owner = {
					add_resource = { minerals = -800 }
					add_resource = { exotic_gases = -100}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 720 } 
						has_resource = { type = exotic_gases amount > 90 } 
					}
				}
				owner = {
					add_resource = {minerals = -720}
					add_resource = { exotic_gases = -90}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 640 } 
						has_resource = { type = exotic_gases amount > 80 } 
					}
				}
				owner = {
					add_resource = {minerals = -640}
					add_resource = { exotic_gases = -80}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_foundry_3_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 800 } 
						has_resource = { type = volatile_motes amount > 100 } 
					}
				}
				owner = {
					add_resource = { minerals = -800 }
					add_resource = { volatile_motes = -100}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 720 } 
						has_resource = { type = volatile_motes amount > 90 } 
					}
				}
				owner = {
					add_resource = {minerals = -720}
					add_resource = { volatile_motes = -90}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 640 } 
						has_resource = { type = volatile_motes amount > 80 } 
					}
				}
				owner = {
					add_resource = {minerals = -640}
					add_resource = { volatile_motes = -80}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_fortress_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 400 } 
						has_resource = { type = volatile_motes amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -400 }
					add_resource = { volatile_motes = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 360 } 
						has_resource = { type = volatile_motes amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -360}
					add_resource = { volatile_motes = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 320 } 
						has_resource = { type = volatile_motes amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -320}
					add_resource = { volatile_motes = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_food_processing_center_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 500 } 
						has_resource = { type = volatile_motes amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -500 }
					add_resource = { volatile_motes = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 450 } 
						has_resource = { type = volatile_motes amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -450}
					add_resource = { volatile_motes = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 400 } 
						has_resource = { type = volatile_motes amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -400}
					add_resource = { volatile_motes = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_foundry_2_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 600 } 
						has_resource = { type = volatile_motes amount > 50 } 
					}
				}
				owner = {
					add_resource = { minerals = -600 }
					add_resource = { volatile_motes = -50}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 540 } 
						has_resource = { type = volatile_motes amount > 45 } 
					}
				}
				owner = {
					add_resource = {minerals = -540}
					add_resource = { volatile_motes = -45}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			if = {
				limit = { 
					owner = {
						has_resource = { type = minerals amount > 480 } 
						has_resource = { type = volatile_motes amount > 40 } 
					}
				}
				owner = {
					add_resource = {minerals = -480}
					add_resource = { volatile_motes = -40}
				}
			}
			else = {
				set_planet_flag = "pab_not_enough_money"
			}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_energy_nexus_flag"
			}
		 }
		 if = {limit = { owner = { is_robot_empire = no } }
			if = {limit = { check_variable = { which = discount value = 0} }
				if = {
					limit = { 
						has_resource = { type = minerals amount > 500 } 
						has_resource = { type = exotic_gases amount > 50 } 
					}
					add_resource = { minerals = -500 }
					add_resource = { exotic_gases = -50}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
				if = {
					limit = { 
						has_resource = { type = minerals amount > 450 } 
						has_resource = { type = exotic_gases amount > 45 } 
					}
					add_resource = {minerals = -450}
					add_resource = { exotic_gases = -45}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
				if = {
					limit = { 
						has_resource = { type = minerals amount > 400 } 
						has_resource = { type = exotic_gases amount > 40 } 
					}
					add_resource = {minerals = -400}
					add_resource = { exotic_gases = -40}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
		}
		else = {
			if = {limit = { check_variable = { which = discount value = 0} }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 300 } 
							has_resource = { type = alloys amount > 150 } 
						}
					}
					owner = {
						add_resource = { minerals = -300 }
						add_resource = { alloys = -150}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 270 } 
							has_resource = { type = alloys amount > 150 } 
						}
					}
					owner = {
						add_resource = {minerals = -270}
						add_resource = { alloys = -150}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 240 } 
							has_resource = { type = alloys amount > 150 } 
						}
					}
					owner = {
						add_resource = {minerals = -240}
						add_resource = { alloys = -150}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
		}
		 
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_mineral_purification_hub_flag"
			}
		 }
		 if = {limit = { owner = { is_robot_empire = no } }
			if = {limit = { check_variable = { which = discount value = 0} }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 500 } 
							has_resource = { type = volatile_motes amount > 50 } 
						}
					}
					owner = {
						add_resource = { minerals = -500 }
						add_resource = { volatile_motes = -50}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 450 } 
							has_resource = { type = volatile_motes amount > 45 } 
						}
					}
					owner = {
						add_resource = {minerals = -450}
						add_resource = { volatile_motes = -45}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 400 } 
							has_resource = { type = volatile_motes amount > 40 } 
						}
					}
					owner = {
						add_resource = {minerals = -400}
						add_resource = { volatile_motes = -40}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
		}
		else = {
			if = {limit = { check_variable = { which = discount value = 0} }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 300 } 
							has_resource = { type = alloys amount > 150 } 
						}
					}
					owner = {
						add_resource = { minerals = -300 }
						add_resource = { alloys = -150}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 270 } 
							has_resource = { type = alloys amount > 150 } 
						}
					}
					owner = {
						add_resource = {minerals = -270}
						add_resource = { alloys = -150}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 240 } 
							has_resource = { type = alloys amount > 150 } 
						}
					}
					owner = {
						add_resource = {minerals = -240}
						add_resource = { alloys = -150}	
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
		}
		 
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_mineral_purification_plant_flag"
				has_planet_flag = "building_energy_grid_flag"
			}
		 }
		 if = {limit = { owner = { is_robot_empire = no } }
			if = {limit = { check_variable = { which = discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = minerals amount > 200 } }
					}
					owner = {add_resource = { minerals = -200 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = minerals amount > 180 } }
					}
					owner = {add_resource = {minerals = -180}}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = minerals amount > 160 } }
					}
					owner = {add_resource = {minerals = -160}}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
		}
		else = {
			if = {limit = { check_variable = { which = discount value = 0} }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 100 } 
							has_resource = { type = alloys amount > 100 } 
						}
					}
					owner = {
						add_resource = { minerals = -100 }
						add_resource = { alloys = -100}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 90 } 
							has_resource = { type = alloys amount > 90 } 
						}
					}
					owner = {
						add_resource = {minerals = -90}
						add_resource = { alloys = -90}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
				if = {
					limit = { 
						owner = {
							has_resource = { type = minerals amount > 80 } 
							has_resource = { type = alloys amount > 80 } 
						}
					}
					owner = {
						add_resource = {minerals = -80}
						add_resource = { alloys = -80}
					}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_infestation_flag"
				has_planet_flag = "d_quarantine_zone_flag"
				has_planet_flag = "d_slums_flag"
				has_planet_flag = "d_crater_flag_flag"
				has_planet_flag = "d_dead_subterraneans_flag"
				has_planet_flag = "d_failing_infrastructure_flag"
				has_planet_flag = "d_decrepit_dwellings_flag"
				has_planet_flag = "d_tomb_world_ruins_flag"
				has_planet_flag = "d_tomb_world_wasteland_flag"
				has_planet_flag = "d_machine_empire_ruins_flag"
				has_planet_flag = "d_exterminators_ruins_flag"
				has_planet_flag = "d_former_battlefield_flag"
				has_planet_flag = "d_strip_mine_flag"
				has_planet_flag = "d_unsupervised_settlement_flag"
				has_planet_flag = "d_collapsed_burrows_flag"
				has_planet_flag = "d_assimilators_ruins_flag"
				has_planet_flag = "d_fungoid_extermination_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 300 } }
					}
					owner = {add_resource = { energy = -300 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 200 } }
					}
					owner = {add_resource = {energy = -200}}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 100 } }
					}
					owner = {add_resource = {energy = -100}}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_sinkhole_subterraneans_flag"
				has_planet_flag = "d_exofungus_blocker_flag"
				has_planet_flag = "d_egg_cracking_flag"
				has_planet_flag = "d_dense_jungle_flag"
				has_planet_flag = "d_toxic_kelp_flag"
				has_planet_flag = "d_deep_sinkhole_flag"
				has_planet_flag = "d_quicksand_basin_flag"
				has_planet_flag = "d_noxious_swamp_flag"
				has_planet_flag = "d_massive_glacier_flag"
				has_planet_flag = "d_dangerous_wildlife_blocker_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 500 } }
					}
					owner = {add_resource = { energy = -500 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 330 } }
					}
					owner = {add_resource = {energy = -330}}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 165 } }
					}
					owner = {add_resource = {energy = -165 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_radioactive_wasteland_flag"
				has_planet_flag = "d_bomb_crater_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 800 } }
					}
					owner = {add_resource = { energy = -800 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 528 } }
					}
					owner = {add_resource = {energy = -528 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 264 } }
					}
					owner = {add_resource = {energy = -264 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_mountain_range_flag"
				has_planet_flag = "d_active_volcano_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 1000 } }
					}
					owner = {add_resource = { energy = -1000 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 666 } }
					}
					owner = {add_resource = {energy = -666 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 333 } }
					}
					owner = {add_resource = {energy = -333 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_city_ruins_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 1200 } }
					}
					owner = {add_resource = { energy = -1200 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 800 } }
					}
					owner = {add_resource = {energy = -800 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 400 } }
					}
					owner = {add_resource = {energy = -400 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_ruined_arcology_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 1000 } }
						owner = {has_resource = { type = minerals amount > 1000 } }
					}
					owner = {add_resource = { energy = -1000 }}
					owner = {add_resource = {minerals = -1000 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 666 } }
						owner = {has_resource = { type = minerals amount > 666 } }
					}
					owner = {add_resource = {energy = -666 }}
					owner = {add_resource = {minerals = -666 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
				if = {
					limit = { 
						owner = {has_resource = { type = energy amount > 333 } }
						owner = {has_resource = { type = minerals amount > 333 } }
					}
					owner = {add_resource = {energy = -333 }}
					owner = {add_resource = {minerals = -333 }}
				}
				else = {
					set_planet_flag = "pab_not_enough_money"
				}
	 		}
	}



} #done

refund_money_by_flag = {
	set_variable = {	which = discount value = 0	}
	set_variable = {	which = blocker_discount value = 0	}

	if = {limit = { owner = {has_tradition = "tr_prosperity_sct"} }
		 change_variable = { which = discount value = 1 }
	}
	if = {limit = { owner = {
				OR = {
					has_civic = "civic_machine_builder"
					has_civic = "civic_functional_architecture"
				}}}
		change_variable = { which = discount value = 1 }
	}

	if = {limit = { owner = { has_tradition = tr_domination_adopt } }
		 change_variable = { which = blocker_discount value = 1 }
	}
	if = {limit = { owner = { has_ascension_perk = ap_mastery_of_nature } }
		 change_variable = { which = blocker_discount value = 1 }
	}

	if = {
		limit = {
			OR = {
				has_planet_flag = "building_resource_silo_flag"
				has_planet_flag = "building_stronghold_flag"
				has_planet_flag = "building_autochthon_monument_flag"
				has_planet_flag = "building_temple_flag"
				has_planet_flag = "building_hive_node_flag"
				has_planet_flag = "building_uplink_node_flag"
				has_planet_flag = "building_corporate_monument_flag"
				has_planet_flag = "building_bio_reactor_flag"
				has_planet_flag = "building_maintenance_depot_flag"
				has_planet_flag = "building_slave_huts_flag"
				has_planet_flag = "building_overseer_homes_flag"
				has_planet_flag = "building_clone_vats_flag"
				has_planet_flag = "building_mote_harvesters_flag"
				has_planet_flag = "building_gas_extractors_flag"
				has_planet_flag = "building_crystal_mines_flag"
				has_planet_flag = "building_betharian_power_plant_flag"
				has_planet_flag = "building_xeno_zoo_flag"
				has_planet_flag = "building_food_processing_facility_flag"
			}
		}
		if = {limit = { check_variable = { which = discount value = 0} }
			owner = {add_resource = {minerals = 200}}
		}
		else_if = {limit = { check_variable = { which = discount value = 1 } }
			owner = {add_resource = {minerals = 180}}
		}
		else_if = {limit = { check_variable = { which = discount value = 2 } }
			owner = {add_resource = {minerals = 160}}
		}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "district_generator_flag"
				has_planet_flag = "district_mining_flag"
				has_planet_flag = "district_farming_flag"
				has_planet_flag = "district_generator_uncapped_flag"
				has_planet_flag = "district_mining_uncapped_flag"
				has_planet_flag = "district_farming_uncapped_flag"
				has_planet_flag = "building_machine_assembly_plant_flag"
				has_planet_flag = "building_commercial_zone_flag"
				has_planet_flag = "building_hydroponics_farm_flag"
				has_planet_flag = "building_luxury_residence_flag"
				has_planet_flag = "building_communal_housing_flag"
				has_planet_flag = "building_drone_storage_flag"
				has_planet_flag = "building_hive_warren_flag"
				has_planet_flag = "building_holo_theatres_flag"
				has_planet_flag = "building_clinic_flag"
				has_planet_flag = "building_spawning_pool_flag"
			}
		 }
		if = {limit = { check_variable = { which = discount value = 0} }
			owner = {add_resource = {minerals = 300}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {	add_resource = {minerals = 270}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {add_resource = {minerals = 240}}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_foundry_1_flag"
				has_planet_flag = "building_factory_1_flag"
				has_planet_flag = "building_slave_processing_flag"
				has_planet_flag = "building_precinct_house_flag"
				has_planet_flag = "building_sentinel_posts_flag"
				has_planet_flag = "building_organic_sanctuary_flag"
				has_planet_flag = "building_research_lab_1_flag"
				has_planet_flag = "building_heritage_site_flag"
				has_planet_flag = "building_holotemple_flag"
				has_planet_flag = "building_hive_cluster_flag"
				has_planet_flag = "building_network_junction_flag"
				has_planet_flag = "building_corporate_site_flag"
				has_planet_flag = "building_noble_estates_flag"
				has_planet_flag = "building_military_academy_flag"
			}
		 }
		if = {limit = { check_variable = { which = discount value = 0} }
			owner = {add_resource = {minerals = 400}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {add_resource = {minerals = 360}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {add_resource = {minerals = 320}}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "district_hab_housing_flag"
				has_planet_flag = "district_hab_energy_flag"
				has_planet_flag = "district_hab_cultural_flag"
				has_planet_flag = "district_hab_science_flag"
				has_planet_flag = "district_hab_commercial_flag"
				has_planet_flag = "building_robot_assembly_plant_flag"
				has_planet_flag = "district_city_flag"
				has_planet_flag = "district_hive_flag"
				has_planet_flag = "district_nexus_flag"
				has_planet_flag = "building_ministry_production_flag"
				has_planet_flag = "building_production_center_flag"
				has_planet_flag = "building_chemical_plant_flag"
				has_planet_flag = "building_refinery_flag"
				has_planet_flag = "building_crystal_plant_flag"
				has_planet_flag = "building_bureaucratic_complex_flag"
				has_planet_flag = "building_psi_corps_flag"
				has_planet_flag = "building_galactic_stock_exchange_flag"
				has_planet_flag = "building_institute_flag"
				has_planet_flag = "building_supercomputer_flag"
				has_planet_flag = "building_capital_flag"
				has_planet_flag = "building_machine_capital_flag"
				has_planet_flag = "building_hab_major_capital_flag"
				has_planet_flag = "building_resort_major_capital_flag"
				has_planet_flag = "building_slave_major_capital_flag"
				has_planet_flag = "building_planetary_shield_generator_flag"
			}
		 }
		if = {limit = { check_variable = { which = discount value = 0} }
			owner = {add_resource = {minerals = 500}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {add_resource = {minerals = 450}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {add_resource = {minerals = 400}}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_hive_major_capital_flag"
				has_planet_flag = "district_arcology_housing_flag"
				has_planet_flag = "district_arcology_arms_industry_flag"
				has_planet_flag = "district_arcology_civilian_industry_flag"
				has_planet_flag = "district_arcology_leisure_flag"
				has_planet_flag = "building_nanite_transmuter_flag"
				has_planet_flag = "building_major_capital_flag"
				has_planet_flag = "building_machine_major_capital_flag"
			}
		 }
		if = {limit = { check_variable = { which = discount value = 0} }
			owner = {add_resource = {minerals = 1000}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {add_resource = {minerals = 900}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {add_resource = {minerals = 800}}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_system_capital_flag"
				has_planet_flag = "building_machine_system_capital_flag"
			}
		 }
		if = {limit = { check_variable = { which = discount value = 0} }
			owner = {add_resource = {minerals = 2000}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 1 } }
			 owner = {add_resource = {minerals = 1800}}
	 	}
	 	else_if = {limit = { check_variable = { which = discount value = 2 } }
			 owner = {add_resource = {minerals = 1600}}
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_autocurating_vault_flag"
				has_planet_flag = "building_citadel_of_faith_flag"
				has_planet_flag = "building_alpha_hub_flag"
				has_planet_flag = "building_corporate_vault_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 1000 }
				add_resource = { rare_crystals = 100}
			}
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 900}
				add_resource = { rare_crystals = 90}
			}
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 800}
				add_resource = { rare_crystals = 80}
			 }
	 	}
		
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_paradise_dome_flag"
				has_planet_flag = "building_communal_housing_large_flag"
				has_planet_flag = "building_drone_megastorage_flag"
				has_planet_flag = "building_expanded_warren_flag"
				has_planet_flag = "building_commercial_megaplex_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 500 }
				add_resource = { rare_crystals = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 450}
				add_resource = { rare_crystals = 45}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 400}
				add_resource = { rare_crystals = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_factory_2_flag"
				has_planet_flag = "building_hypercomms_forum_flag"
				has_planet_flag = "building_sacred_nexus_flag"
				has_planet_flag = "building_hive_confluence_flag"
				has_planet_flag = "building_system_conflux_flag"
				has_planet_flag = "building_corporate_forum_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 600 }
				add_resource = { rare_crystals = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 540}
				add_resource = { rare_crystals = 45}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 480}
				add_resource = { rare_crystals = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_hyper_entertainment_forum_flag"
				has_planet_flag = "building_hospital_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 500 }
				add_resource = { exotic_gases = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 owner = {
				add_resource = {minerals = 450}
				add_resource = { exotic_gases = 45}
		 	}
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 400}
				add_resource = { exotic_gases = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_research_lab_2_flag"
				has_planet_flag = "building_hall_judgment_flag"
				has_planet_flag = "building_organic_paradise_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 600 }
				add_resource = { exotic_gases = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 540}
				add_resource = { exotic_gases = 45}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 480}
				add_resource = { exotic_gases = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_factory_3_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 800 }
				add_resource = { rare_crystals = 100}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 720}
				add_resource = { rare_crystals = 90}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 640}
				add_resource = { rare_crystals = 80}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_research_lab_3_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 800 }
				add_resource = { exotic_gases = 100}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 720}
				add_resource = { exotic_gases = 90}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 640}
				add_resource = { exotic_gases = 80}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_foundry_3_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 800 }
				add_resource = { volatile_motes = 100}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 720}
				add_resource = { volatile_motes = 90}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 640}
				add_resource = { volatile_motes = 80}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_fortress_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 400 }
				add_resource = { volatile_motes = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 360}
				add_resource = { volatile_motes = 45}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 320}
				add_resource = { volatile_motes = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_food_processing_center_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 500 }
				add_resource = { volatile_motes = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 450}
				add_resource = { volatile_motes = 45}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 400}
				add_resource = { volatile_motes = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_foundry_2_flag"
			}
		 }
		 if = {limit = { check_variable = { which = discount value = 0} }
		 	owner = {
				add_resource = { minerals = 600 }
				add_resource = { volatile_motes = 50}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 1 } }
		 	owner = {
				add_resource = {minerals = 540}
				add_resource = { volatile_motes = 45}
			 }
	 	}
		 else_if = {limit = { check_variable = { which = discount value = 2 } }
		 	owner = {
				add_resource = {minerals = 480}
				add_resource = { volatile_motes = 40}
			 }
	 	}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_energy_nexus_flag"
			}
		 }
		 if = {limit = { owner = { is_robot_empire = no } }
			if = {limit = { check_variable = { which = discount value = 0} }
				owner = {
					add_resource = { minerals = 500 }
					add_resource = { exotic_gases = 50}
				}
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 	owner = {
					add_resource = {minerals = 450}
					add_resource = { exotic_gases = 45}
				 }
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 	owner = {
					add_resource = {minerals = 400}
					add_resource = { exotic_gases = 40}
				 }
	 		}
		}
		else = {
			if = {limit = { check_variable = { which = discount value = 0} }
				owner = {
					add_resource = { minerals = 300 }
					add_resource = { alloys = 150}
				}
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 	owner = {
					add_resource = {minerals = 270}
					add_resource = { alloys = 150}
				 }
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 	owner = {
					add_resource = {minerals = 240}
					add_resource = { alloys = 150}
				 }
	 		}
		}		 
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_mineral_purification_hub_flag"
			}
		 }
		 if = {limit = { owner = { is_robot_empire = no } }
			if = {limit = { check_variable = { which = discount value = 0} }
				owner = {
					add_resource = { minerals = 500 }
					add_resource = { volatile_motes = 50}
				}
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 	owner = {
					add_resource = {minerals = 450}
					add_resource = { volatile_motes = 45}
				 }
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 	owner = {
					add_resource = {minerals = 400}
					add_resource = { volatile_motes = 40}
			 	}
	 		}
		}
		else = {
			if = {limit = { check_variable = { which = discount value = 0} }
				owner = {
					add_resource = { minerals = 300 }
					add_resource = { alloys = 150}
				}
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 	owner = {
					add_resource = {minerals = 270}
					add_resource = { alloys = 150}
				 }
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 	owner = {
					add_resource = {minerals = 240}
					add_resource = { alloys = 150}
				 }
	 		}
		}
		 
	}
	else_if = {
		limit = {
			OR = {
				has_planet_flag = "building_mineral_purification_plant_flag"
				has_planet_flag = "building_energy_grid_flag"
			}
		 }
		 if = {limit = { owner = { is_robot_empire = no } }
			if = {limit = { check_variable = { which = discount value = 0} }
				owner = {add_resource = { minerals = 200 }}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 1 } }
			 	owner = {add_resource = {minerals = 180}}
	 		}
	 		else_if = {limit = { check_variable = { which = discount value = 2 } }
			 	owner = {add_resource = {minerals = 160}}
	 		}
		}
		else = {
			if = {limit = { check_variable = { which = discount value = 0} }
				owner = {
					add_resource = { minerals = 100 }
					add_resource = { alloys = 100}
				}
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 1 } }
			 	owner = {
					add_resource = {minerals = 90}
					add_resource = { alloys = 90}
				 }
	 		}
			 else_if = {limit = { check_variable = { which = discount value = 2 } }
			 	owner = {
					add_resource = {minerals = 80}
					add_resource = { alloys = 80}
				 }
	 		}
		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_infestation_flag"
				has_planet_flag = "d_quarantine_zone_flag"
				has_planet_flag = "d_slums_flag"
				has_planet_flag = "d_crater_flag_flag"
				has_planet_flag = "d_dead_subterraneans_flag"
				has_planet_flag = "d_failing_infrastructure_flag"
				has_planet_flag = "d_decrepit_dwellings_flag"
				has_planet_flag = "d_tomb_world_ruins_flag"
				has_planet_flag = "d_tomb_world_wasteland_flag"
				has_planet_flag = "d_machine_empire_ruins_flag"
				has_planet_flag = "d_exterminators_ruins_flag"
				has_planet_flag = "d_former_battlefield_flag"
				has_planet_flag = "d_strip_mine_flag"
				has_planet_flag = "d_unsupervised_settlement_flag"
				has_planet_flag = "d_collapsed_burrows_flag"
				has_planet_flag = "d_assimilators_ruins_flag"
				has_planet_flag = "d_fungoid_extermination_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
					owner = {add_resource = { energy = 300 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
					owner = {add_resource = {energy = 200}}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
					owner = {add_resource = {energy = 100}}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_sinkhole_subterraneans_flag"
				has_planet_flag = "d_exofungus_blocker_flag"
				has_planet_flag = "d_egg_cracking_flag"
				has_planet_flag = "d_dense_jungle_flag"
				has_planet_flag = "d_toxic_kelp_flag"
				has_planet_flag = "d_deep_sinkhole_flag"
				has_planet_flag = "d_quicksand_basin_flag"
				has_planet_flag = "d_noxious_swamp_flag"
				has_planet_flag = "d_massive_glacier_flag"
				has_planet_flag = "d_dangerous_wildlife_blocker_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
					owner = {add_resource = { energy = 500 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
					owner = {add_resource = {energy = 330}}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
					owner = {add_resource = {energy = 165 }}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_radioactive_wasteland_flag"
				has_planet_flag = "d_bomb_crater_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
					owner = {add_resource = { energy = 800 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
					owner = {add_resource = {energy = 528 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
					owner = {add_resource = {energy = 264 }}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_mountain_range_flag"
				has_planet_flag = "d_active_volcano_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
					owner = {add_resource = { energy = 1000 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
					owner = {add_resource = {energy = 666 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
					owner = {add_resource = {energy = 333 }}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_city_ruins_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
					owner = {add_resource = { energy = 1200 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
					owner = {add_resource = {energy = 800 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
					owner = {add_resource = {energy = 400 }}
	 		}
	}
	else_if = {
		limit = { 
			OR = {
				has_planet_flag = "d_ruined_arcology_flag"
			}
		}
		if = {limit = { check_variable = { which = blocker_discount value = 0} }
					owner = {add_resource = { energy = 1000 }}
					owner = {add_resource = {minerals = 1000 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 1 } }
					owner = {add_resource = {energy = 666 }}
					owner = {add_resource = {minerals = 666 }}
	 		}
	 		else_if = {limit = { check_variable = { which = blocker_discount value = 2 } }
					owner = {add_resource = {energy = 333 }}
					owner = {add_resource = {minerals = 333 }}
	 		}
	}
} #done

clear_building_flags = {
	remove_planet_flag = "building_resource_silo_flag"
	remove_planet_flag = "district_generator_flag"
	remove_planet_flag = "district_mining_flag"
	remove_planet_flag = "district_farming_flag"
	remove_planet_flag = "district_generator_uncapped_flag"
	remove_planet_flag = "district_mining_uncapped_flag"
	remove_planet_flag = "district_farming_uncapped_flag"
	remove_planet_flag = "district_hab_housing_flag"
	remove_planet_flag = "district_hab_energy_flag"
	remove_planet_flag = "district_hab_cultural_flag"
	remove_planet_flag = "district_hab_science_flag"
	remove_planet_flag = "district_hab_commercial_flag"
	remove_planet_flag = "building_stronghold_flag"
	remove_planet_flag = "building_autochthon_monument_flag"
	remove_planet_flag = "building_temple_flag"
	remove_planet_flag = "building_hive_node_flag"
	remove_planet_flag = "building_uplink_node_flag"
	remove_planet_flag = "building_corporate_monument_flag"
	remove_planet_flag = "building_bio_reactor_flag"
	remove_planet_flag = "building_maintenance_depot_flag"
	remove_planet_flag = "building_slave_huts_flag"
	remove_planet_flag = "building_overseer_homes_flag"
	remove_planet_flag = "building_robot_assembly_plant_flag"
	remove_planet_flag = "building_foundry_1_flag"
	remove_planet_flag = "building_factory_1_flag"
	remove_planet_flag = "building_machine_assembly_plant_flag"
	remove_planet_flag = "building_slave_processing_flag"
	remove_planet_flag = "building_precinct_house_flag"
	remove_planet_flag = "building_sentinel_posts_flag"
	remove_planet_flag = "building_clone_vats_flag"
	remove_planet_flag = "building_mote_harvesters_flag"
	remove_planet_flag = "building_gas_extractors_flag"
	remove_planet_flag = "building_crystal_mines_flag"
	remove_planet_flag = "building_betharian_power_plant_flag"
	remove_planet_flag = "building_xeno_zoo_flag"
	remove_planet_flag = "building_organic_sanctuary_flag"
	remove_planet_flag = "building_commercial_zone_flag"
	remove_planet_flag = "building_research_lab_1_flag"
	remove_planet_flag = "building_hydroponics_farm_flag"
	remove_planet_flag = "building_food_processing_facility_flag"
	remove_planet_flag = "building_mineral_purification_plant_flag"
	remove_planet_flag = "building_energy_grid_flag"
	remove_planet_flag = "building_luxury_residence_flag"
	remove_planet_flag = "building_communal_housing_flag"
	remove_planet_flag = "building_drone_storage_flag"
	remove_planet_flag = "building_hive_warren_flag"
	remove_planet_flag = "building_holo_theatres_flag"
	remove_planet_flag = "building_clinic_flag"
	remove_planet_flag = "building_spawning_pool_flag"
	remove_planet_flag = "building_fortress_flag"
	remove_planet_flag = "building_heritage_site_flag"
	remove_planet_flag = "building_holotemple_flag"
	remove_planet_flag = "building_hive_cluster_flag"
	remove_planet_flag = "building_network_junction_flag"
	remove_planet_flag = "building_corporate_site_flag"
	remove_planet_flag = "district_city_flag"
	remove_planet_flag = "district_hive_flag"
	remove_planet_flag = "district_nexus_flag"
	remove_planet_flag = "building_ministry_production_flag"
	remove_planet_flag = "building_production_center_flag"
	remove_planet_flag = "building_chemical_plant_flag"
	remove_planet_flag = "building_refinery_flag"
	remove_planet_flag = "building_crystal_plant_flag"
	remove_planet_flag = "building_noble_estates_flag"
	remove_planet_flag = "building_bureaucratic_complex_flag"
	remove_planet_flag = "building_psi_corps_flag"
	remove_planet_flag = "building_military_academy_flag"
	remove_planet_flag = "building_galactic_stock_exchange_flag"
	remove_planet_flag = "building_institute_flag"
	remove_planet_flag = "building_supercomputer_flag"
	remove_planet_flag = "building_foundry_2_flag"
	remove_planet_flag = "building_factory_2_flag"
	remove_planet_flag = "building_paradise_dome_flag"
	remove_planet_flag = "building_communal_housing_large_flag"
	remove_planet_flag = "building_drone_megastorage_flag"
	remove_planet_flag = "building_expanded_warren_flag"
	remove_planet_flag = "building_hyper_entertainment_forum_flag"
	remove_planet_flag = "building_hospital_flag"
	remove_planet_flag = "building_capital_flag"
	remove_planet_flag = "building_mineral_purification_hub_flag"
	remove_planet_flag = "building_energy_nexus_flag"
	remove_planet_flag = "building_food_processing_center_flag"
	remove_planet_flag = "building_research_lab_2_flag"
	remove_planet_flag = "building_research_lab_3_flag"
	remove_planet_flag = "building_commercial_megaplex_flag"
	remove_planet_flag = "building_machine_capital_flag"
	remove_planet_flag = "building_hive_major_capital_flag"
	remove_planet_flag = "building_hab_major_capital_flag"
	remove_planet_flag = "building_resort_major_capital_flag"
	remove_planet_flag = "building_slave_major_capital_flag"
	remove_planet_flag = "building_hall_judgment_flag"
	remove_planet_flag = "building_hypercomms_forum_flag"
	remove_planet_flag = "building_sacred_nexus_flag"
	remove_planet_flag = "building_hive_confluence_flag"
	remove_planet_flag = "building_system_conflux_flag"
	remove_planet_flag = "building_organic_paradise_flag"
	remove_planet_flag = "building_corporate_forum_flag"
	remove_planet_flag = "district_arcology_housing_flag"
	remove_planet_flag = "district_arcology_arms_industry_flag"
	remove_planet_flag = "district_arcology_civilian_industry_flag"
	remove_planet_flag = "district_arcology_leisure_flag"
	remove_planet_flag = "building_nanite_transmuter_flag"
	remove_planet_flag = "building_planetary_shield_generator_flag"
	remove_planet_flag = "building_foundry_3_flag"
	remove_planet_flag = "building_factory_3_flag"
	remove_planet_flag = "building_major_capital_flag"
	remove_planet_flag = "building_machine_major_capital_flag"
	remove_planet_flag = "building_autocurating_vault_flag"
	remove_planet_flag = "building_citadel_of_faith_flag"
	remove_planet_flag = "building_alpha_hub_flag"
	remove_planet_flag = "building_corporate_vault_flag"
	remove_planet_flag = "building_system_capital_flag"
	remove_planet_flag = "building_machine_system_capital_flag"
	remove_planet_flag = "d_infestation_flag"
	remove_planet_flag = "d_quarantine_zone_flag"
	remove_planet_flag = "d_slums_flag"
	remove_planet_flag = "d_crater_flag"
	remove_planet_flag = "d_dead_subterraneans_flag"
	remove_planet_flag = "d_failing_infrastructure_flag"
	remove_planet_flag = "d_decrepit_dwellings_flag"
	remove_planet_flag = "d_tomb_world_ruins_flag"
	remove_planet_flag = "d_tomb_world_wasteland_flag"
	remove_planet_flag = "d_machine_empire_ruins_flag"
	remove_planet_flag = "d_exterminators_ruins_flag"
	remove_planet_flag = "d_former_battlefield_flag"
	remove_planet_flag = "d_strip_mine_flag"
	remove_planet_flag = "d_unsupervised_settlement_flag"
	remove_planet_flag = "d_collapsed_burrows_flag"
	remove_planet_flag = "d_assimilators_ruins_flag"
	remove_planet_flag = "d_fungoid_extermination_flag"
	remove_planet_flag = "d_sinkhole_subterraneans_flag"
	remove_planet_flag = "d_exofungus_blocker_flag"
	remove_planet_flag = "d_egg_cracking_flag"
	remove_planet_flag = "d_dense_jungle_flag"
	remove_planet_flag = "d_toxic_kelp_flag"
	remove_planet_flag = "d_deep_sinkhole_flag"
	remove_planet_flag = "d_quicksand_basin_flag"
	remove_planet_flag = "d_noxious_swamp_flag"
	remove_planet_flag = "d_massive_glacier_flag"
	remove_planet_flag = "d_dangerous_wildlife_blocker_flag"
	remove_planet_flag = "d_radioactive_wasteland_flag"
	remove_planet_flag = "d_bomb_crater_flag"
	remove_planet_flag = "d_mountain_range_flag"
	remove_planet_flag = "d_active_volcano_flag"
	remove_planet_flag = "d_city_ruins_flag"
	remove_planet_flag = "d_ruined_arcology_flag"
} #done

clear_building_planet_modifiers = {
	remove_modifier = "building_factory_3_flag"
	remove_modifier = "building_autocurating_vault_flag"
	remove_modifier = "building_citadel_of_faith_flag"
	remove_modifier = "building_alpha_hub_flag"
	remove_modifier = "building_corporate_vault_flag"
	remove_modifier = "building_research_lab_3_flag"
	remove_modifier = "building_foundry_3_flag"
	remove_modifier = "building_paradise_dome_flag"
	remove_modifier = "building_communal_housing_large_flag"
	remove_modifier = "building_drone_megastorage_flag"
	remove_modifier = "building_expanded_warren_flag"
	remove_modifier = "building_commercial_megaplex_flag"
	remove_modifier = "building_factory_2_flag"
	remove_modifier = "building_hypercomms_forum_flag"
	remove_modifier = "building_sacred_nexus_flag"
	remove_modifier = "building_hive_confluence_flag"
	remove_modifier = "building_system_conflux_flag"
	remove_modifier = "building_corporate_forum_flag"
	remove_modifier = "building_hyper_entertainment_forum_flag"
	remove_modifier = "building_hospital_flag"
	remove_modifier = "building_energy_nexus_flag"
	remove_modifier = "building_research_lab_2_flag"
	remove_modifier = "building_hall_judgment_flag"
	remove_modifier = "building_organic_paradise_flag"
	remove_modifier = "building_fortress_flag"
	remove_modifier = "building_mineral_purification_hub_flag"
	remove_modifier = "building_food_processing_center_flag"
	remove_modifier = "building_foundry_2_flag"
	remove_modifier = "building_mineral_purification_plant_flag"
	remove_modifier = "building_energy_grid_flag"
	remove_modifier = "building_resource_silo_flag"
	remove_modifier = "building_stronghold_flag"
	remove_modifier = "building_autochthon_monument_flag"
	remove_modifier = "building_temple_flag"
	remove_modifier = "building_hive_node_flag"
	remove_modifier = "building_uplink_node_flag"
	remove_modifier = "building_corporate_monument_flag"
	remove_modifier = "building_bio_reactor_flag"
	remove_modifier = "building_maintenance_depot_flag"
	remove_modifier = "building_slave_huts_flag"
	remove_modifier = "building_overseer_homes_flag"
	remove_modifier = "building_clone_vats_flag"
	remove_modifier = "building_mote_harvesters_flag"
	remove_modifier = "building_gas_extractors_flag"
	remove_modifier = "building_crystal_mines_flag"
	remove_modifier = "building_betharian_power_plant_flag"
	remove_modifier = "building_xeno_zoo_flag"
	remove_modifier = "building_food_processing_facility_flag"
	remove_modifier = "district_generator_flag"
	remove_modifier = "district_mining_flag"
	remove_modifier = "district_farming_flag"
	remove_modifier = "district_generator_uncapped_flag"
	remove_modifier = "district_mining_uncapped_flag"
	remove_modifier = "district_farming_uncapped_flag"
	remove_modifier = "building_machine_assembly_plant_flag"
	remove_modifier = "building_commercial_zone_flag"
	remove_modifier = "building_hydroponics_farm_flag"
	remove_modifier = "building_luxury_residence_flag"
	remove_modifier = "building_communal_housing_flag"
	remove_modifier = "building_drone_storage_flag"
	remove_modifier = "building_hive_warren_flag"
	remove_modifier = "building_holo_theatres_flag"
	remove_modifier = "building_clinic_flag"
	remove_modifier = "building_spawning_pool_flag"
	remove_modifier = "building_foundry_1_flag"
	remove_modifier = "building_factory_1_flag"
	remove_modifier = "building_slave_processing_flag"
	remove_modifier = "building_precinct_house_flag"
	remove_modifier = "building_sentinel_posts_flag"
	remove_modifier = "building_organic_sanctuary_flag"
	remove_modifier = "building_research_lab_1_flag"
	remove_modifier = "building_heritage_site_flag"
	remove_modifier = "building_holotemple_flag"
	remove_modifier = "building_hive_cluster_flag"
	remove_modifier = "building_network_junction_flag"
	remove_modifier = "building_corporate_site_flag"
	remove_modifier = "building_noble_estates_flag"
	remove_modifier = "building_military_academy_flag"
	remove_modifier = "district_hab_housing_flag"
	remove_modifier = "district_hab_energy_flag"
	remove_modifier = "district_hab_cultural_flag"
	remove_modifier = "district_hab_science_flag"
	remove_modifier = "district_hab_commercial_flag"
	remove_modifier = "building_robot_assembly_plant_flag"
	remove_modifier = "district_city_flag"
	remove_modifier = "district_hive_flag"
	remove_modifier = "district_nexus_flag"
	remove_modifier = "building_ministry_production_flag"
	remove_modifier = "building_production_center_flag"
	remove_modifier = "building_chemical_plant_flag"
	remove_modifier = "building_refinery_flag"
	remove_modifier = "building_crystal_plant_flag"
	remove_modifier = "building_bureaucratic_complex_flag"
	remove_modifier = "building_psi_corps_flag"
	remove_modifier = "building_galactic_stock_exchange_flag"
	remove_modifier = "building_institute_flag"
	remove_modifier = "building_supercomputer_flag"
	remove_modifier = "building_capital_flag"
	remove_modifier = "building_machine_capital_flag"
	remove_modifier = "building_hab_major_capital_flag"
	remove_modifier = "building_resort_major_capital_flag"
	remove_modifier = "building_slave_major_capital_flag"
	remove_modifier = "building_planetary_shield_generator_flag"
	remove_modifier = "building_hive_major_capital_flag"
	remove_modifier = "district_arcology_housing_flag"
	remove_modifier = "district_arcology_arms_industry_flag"
	remove_modifier = "district_arcology_civilian_industry_flag"
	remove_modifier = "district_arcology_leisure_flag"
	remove_modifier = "building_nanite_transmuter_flag"
	remove_modifier = "building_major_capital_flag"
	remove_modifier = "building_machine_major_capital_flag"
	remove_modifier = "building_system_capital_flag"
	remove_modifier = "building_machine_system_capital_flag"
	remove_modifier = "d_infestation_flag"
	remove_modifier = "d_quarantine_zone_flag"
	remove_modifier = "d_slums_flag"
	remove_modifier = "d_crater_flag"
	remove_modifier = "d_dead_subterraneans_flag"
	remove_modifier = "d_failing_infrastructure_flag"
	remove_modifier = "d_decrepit_dwellings_flag"
	remove_modifier = "d_tomb_world_ruins_flag"
	remove_modifier = "d_tomb_world_wasteland_flag"
	remove_modifier = "d_machine_empire_ruins_flag"
	remove_modifier = "d_exterminators_ruins_flag"
	remove_modifier = "d_former_battlefield_flag"
	remove_modifier = "d_strip_mine_flag"
	remove_modifier = "d_unsupervised_settlement_flag"
	remove_modifier = "d_collapsed_burrows_flag"
	remove_modifier = "d_assimilators_ruins_flag"
	remove_modifier = "d_fungoid_extermination_flag"
	remove_modifier = "d_sinkhole_subterraneans_flag"
	remove_modifier = "d_exofungus_blocker_flag"
	remove_modifier = "d_egg_cracking_flag"
	remove_modifier = "d_dense_jungle_flag"
	remove_modifier = "d_toxic_kelp_flag"
	remove_modifier = "d_deep_sinkhole_flag"
	remove_modifier = "d_quicksand_basin_flag"
	remove_modifier = "d_noxious_swamp_flag"
	remove_modifier = "d_massive_glacier_flag"
	remove_modifier = "d_dangerous_wildlife_blocker_flag"
	remove_modifier = "d_radioactive_wasteland_flag"
	remove_modifier = "d_bomb_crater_flag"
	remove_modifier = "d_mountain_range_flag"
	remove_modifier = "d_active_volcano_flag"
	remove_modifier = "d_city_ruins_flag"
	remove_modifier = "d_ruined_arcology_flag"
} #done

add_building_planet_modifier = {

	if = {
		limit = { NOT = { has_global_flag = pab_insta_build }} 

		set_variable = {
			which = pab_build_speed
			value = 0
		}		
		if = {
			limit = { owner = { has_edict = architectural_renaissance } }
			change_variable = { which = pab_build_speed value = 100 }
		}
		if = {
			limit = { owner = { has_technology = tech_construction_templates } }
			change_variable = { which = pab_build_speed value = 50 }
		}
		if = {
			limit = { owner = { has_tradition = tr_prosperity_sct } }
			change_variable = { which = pab_build_speed value = 25 }
		}
		if = {
			limit = { owner = { has_technology = tech_assembly_pattern } }
			change_variable = { which = pab_build_speed value = 25 }
		}
		if = {
			limit = { owner = { has_edict = masters_writings_politics } }
			change_variable = { which = pab_build_speed value = 10 }
		}
		if = {
			limit = { sector = { leader = { has_trait = trait_brainslug }}}
			change_variable = { which = pab_build_speed value = 10 }
		}
		#if = {
		#	limit = { sector = { leader = { has_trait = leader_trait_architectural_interest }}}
		#	change_variable = { which = pab_build_speed value = 10 }
		#} #doesnt work
		if = {
			limit = { owner = {leader = { has_trait = trait_ruler_architectural_sense }}}
			change_variable = { which = pab_build_speed value = 10 }
		}
	
		if = {
			limit = { has_planet_flag = "building_resource_silo_flag" }
			add_modifier = { modifier = "pab_build_in_progress_modifier" days = 180	}
		}
		else_if = {
			limit = { 
				OR = {
					has_planet_flag = "district_generator_flag"
					has_planet_flag = "district_mining_flag"
					has_planet_flag = "district_farming_flag"
					has_planet_flag = "district_generator_uncapped_flag"
					has_planet_flag = "district_mining_uncapped_flag"
					has_planet_flag = "district_farming_uncapped_flag"
					has_planet_flag = "district_hab_housing_flag"
					has_planet_flag = "district_hab_energy_flag"
					has_planet_flag = "district_hab_cultural_flag"
					has_planet_flag = "district_hab_science_flag"
					has_planet_flag = "district_hab_commercial_flag"
					has_planet_flag = "building_stronghold_flag"
					has_planet_flag = "building_autochthon_monument_flag"
					has_planet_flag = "building_temple_flag"
					has_planet_flag = "building_hive_node_flag"
					has_planet_flag = "building_uplink_node_flag"
					has_planet_flag = "building_corporate_monument_flag"
					has_planet_flag = "building_bio_reactor_flag"
					has_planet_flag = "building_maintenance_depot_flag"
					has_planet_flag = "building_slave_huts_flag"
					has_planet_flag = "building_overseer_homes_flag"
				}
			}
	
			if = {
				limit = { check_variable = {which = pab_build_speed value = 0 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 240	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 10 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 218	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 20 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 200	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 30 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 184	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 40 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 171	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 50 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 160	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 60 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 150	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 70 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 141	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 80 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 133	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 90 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 126	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 100 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 120	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 110 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 114	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 120 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 109	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 130 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 104	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 140 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 100	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 150 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 96	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 160 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 92	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 170 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 88	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 180 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 85	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 190 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 82	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 200 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 80	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 210 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 77	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 220 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 75	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 230 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 72	}
			}
			else = {
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 70	}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "building_robot_assembly_plant_flag"
					has_planet_flag = "building_foundry_1_flag"
					has_planet_flag = "building_factory_1_flag"
					has_planet_flag = "building_machine_assembly_plant_flag"
					has_planet_flag = "building_slave_processing_flag"
					has_planet_flag = "building_precinct_house_flag"
					has_planet_flag = "building_sentinel_posts_flag"
					has_planet_flag = "building_clone_vats_flag"
					has_planet_flag = "building_mote_harvesters_flag"
					has_planet_flag = "building_gas_extractors_flag"
					has_planet_flag = "building_crystal_mines_flag"
					has_planet_flag = "building_betharian_power_plant_flag"
					has_planet_flag = "building_xeno_zoo_flag"
					has_planet_flag = "building_organic_sanctuary_flag"
					has_planet_flag = "building_commercial_zone_flag"
					has_planet_flag = "building_research_lab_1_flag"
					has_planet_flag = "building_hydroponics_farm_flag"
					has_planet_flag = "building_food_processing_facility_flag"
					has_planet_flag = "building_mineral_purification_plant_flag"
					has_planet_flag = "building_energy_grid_flag"
					has_planet_flag = "building_luxury_residence_flag"
					has_planet_flag = "building_communal_housing_flag"
					has_planet_flag = "building_drone_storage_flag"
					has_planet_flag = "building_hive_warren_flag"
					has_planet_flag = "building_holo_theatres_flag"
					has_planet_flag = "building_clinic_flag"
					has_planet_flag = "building_spawning_pool_flag"
					has_planet_flag = "building_fortress_flag"
					has_planet_flag = "building_heritage_site_flag"
					has_planet_flag = "building_holotemple_flag"
					has_planet_flag = "building_hive_cluster_flag"
					has_planet_flag = "building_network_junction_flag"
					has_planet_flag = "building_corporate_site_flag"
				}
			 }
			 if = {
				limit = { check_variable = {which = pab_build_speed value = 0 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 360	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 10 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 327	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 20 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 300	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 30 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 276	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 40 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 257	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 50 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 240	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 60 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 225	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 70 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 211	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 80 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 200	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 90 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 189	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 100 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 180	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 110 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 171	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 120 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 163	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 130 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 156	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 140 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 150	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 150 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 144	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 160 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 138	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 170 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 133	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 180 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 128	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 190 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 124	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 200 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 120	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 210 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 116	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 220 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 112	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 230 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 109	}
			}
			else = {
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 105	}
			}
		}
		else_if = {
			limit = { 
				OR = {
					has_planet_flag = "district_city_flag"
					has_planet_flag = "district_hive_flag"
					has_planet_flag = "district_nexus_flag"
					has_planet_flag = "building_ministry_production_flag"
					has_planet_flag = "building_production_center_flag"
					has_planet_flag = "building_chemical_plant_flag"
					has_planet_flag = "building_refinery_flag"
					has_planet_flag = "building_crystal_plant_flag"
					has_planet_flag = "building_noble_estates_flag"
					has_planet_flag = "building_bureaucratic_complex_flag"
					has_planet_flag = "building_psi_corps_flag"
					has_planet_flag = "building_military_academy_flag"
					has_planet_flag = "building_galactic_stock_exchange_flag"
					has_planet_flag = "building_institute_flag"
					has_planet_flag = "building_supercomputer_flag"
					has_planet_flag = "building_foundry_2_flag"
					has_planet_flag = "building_factory_2_flag"
					has_planet_flag = "building_paradise_dome_flag"
					has_planet_flag = "building_communal_housing_large_flag"
					has_planet_flag = "building_drone_megastorage_flag"
					has_planet_flag = "building_expanded_warren_flag"
					has_planet_flag = "building_hyper_entertainment_forum_flag"
					has_planet_flag = "building_hospital_flag"
					has_planet_flag = "building_capital_flag"
					has_planet_flag = "building_mineral_purification_hub_flag"
					has_planet_flag = "building_energy_nexus_flag"
					has_planet_flag = "building_food_processing_center_flag"
					has_planet_flag = "building_research_lab_2_flag"
					has_planet_flag = "building_research_lab_3_flag"
					has_planet_flag = "building_commercial_megaplex_flag"
					has_planet_flag = "building_machine_capital_flag"
					has_planet_flag = "building_hive_major_capital_flag"
					has_planet_flag = "building_hab_major_capital_flag"
					has_planet_flag = "building_resort_major_capital_flag"
					has_planet_flag = "building_slave_major_capital_flag"
					has_planet_flag = "building_hall_judgment_flag"
					has_planet_flag = "building_hypercomms_forum_flag"
					has_planet_flag = "building_sacred_nexus_flag"
					has_planet_flag = "building_hive_confluence_flag"
					has_planet_flag = "building_system_conflux_flag"
					has_planet_flag = "building_organic_paradise_flag"
					has_planet_flag = "building_corporate_forum_flag"
				}
			 }
			 if = {
				limit = { check_variable = {which = pab_build_speed value = 0 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 480	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 10 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 436	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 20 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 400	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 30 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 369	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 40 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 342	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 50 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 320	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 60 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 300	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 70 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 282	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 80 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 266	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 90 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 252	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 100 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 240	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 110 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 228	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 120 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 218	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 130 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 208	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 140 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 200	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 150 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 192	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 160 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 184	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 170 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 177	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 180 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 171	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 190 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 165	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 200 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 160	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 210 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 154	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 220 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 150	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 230 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 145	}
			}
			else = {
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 141	}
			}
		}
		else_if = {
			limit = { 
				OR = {
					has_planet_flag = "district_arcology_housing_flag"
					has_planet_flag = "district_arcology_arms_industry_flag"
					has_planet_flag = "district_arcology_civilian_industry_flag"
					has_planet_flag = "district_arcology_leisure_flag"
					has_planet_flag = "building_nanite_transmuter_flag"
					has_planet_flag = "building_planetary_shield_generator_flag"
					has_planet_flag = "building_foundry_3_flag"
					has_planet_flag = "building_factory_3_flag"
					has_planet_flag = "building_major_capital_flag"
					has_planet_flag = "building_machine_major_capital_flag"
					has_planet_flag = "building_autocurating_vault_flag"
					has_planet_flag = "building_citadel_of_faith_flag"
					has_planet_flag = "building_alpha_hub_flag"
					has_planet_flag = "building_corporate_vault_flag"
				}
			 }
			 if = {
				limit = { check_variable = {which = pab_build_speed value = 0 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 600	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 10 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 545	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 20 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 500	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 30 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 461	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 40 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 428	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 50 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 400	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 60 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 375	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 70 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 352	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 80 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 333	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 90 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 315	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 100 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 300	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 110 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 285	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 120 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 272	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 130 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 260	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 140 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 250	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 150 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 240	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 160 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 230	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 170 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 222	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 180 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 214	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 190 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 206	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 200 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 200	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 210 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 193	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 220 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 187	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 230 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 181	}
			}
			else = {
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 176	}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "building_system_capital_flag"
					has_planet_flag = "building_machine_system_capital_flag"
				}
			 }
			 if = {
				limit = { check_variable = {which = pab_build_speed value = 0 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 900	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 10 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 818	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 20 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 750	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 30 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 692	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 40 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 642	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 50 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 600	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 60 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 562	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 70 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 529	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 80 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 500	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 90 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 473	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 100 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 450	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 110 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 428	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 120 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 409	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 130 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 391	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 140 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 375	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 150 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 360	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 160 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 346	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 170 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 333	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 180 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 321	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 190 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 310	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 200 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 300	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 210 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 290	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 220 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 281	}
			}
			else_if = {
				limit = { check_variable = {which = pab_build_speed value <= 230 } }
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 272	}
			}
			else = {
				add_modifier = { modifier = "pab_build_in_progress_modifier" days = 264	}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "d_infestation_flag"
					has_planet_flag = "d_quarantine_zone_flag"
					has_planet_flag = "d_slums_flag"
					has_planet_flag = "d_crater_flag"
					has_planet_flag = "d_dead_subterraneans_flag"
					has_planet_flag = "d_sinkhole_subterraneans_flag"
				}
			}
			add_modifier = { modifier = "pab_build_in_progress_modifier" days = 100	}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "d_failing_infrastructure_flag"
					has_planet_flag = "d_decrepit_dwellings_flag"
					has_planet_flag = "d_tomb_world_ruins_flag"
					has_planet_flag = "d_tomb_world_wasteland_flag"
					has_planet_flag = "d_machine_empire_ruins_flag"
					has_planet_flag = "d_exterminators_ruins_flag"
					has_planet_flag = "d_former_battlefield_flag"
					has_planet_flag = "d_strip_mine_flag"
					has_planet_flag = "d_unsupervised_settlement_flag"
					has_planet_flag = "d_collapsed_burrows_flag"
					has_planet_flag = "d_assimilators_ruins_flag"
					has_planet_flag = "d_fungoid_extermination_flag"
					has_planet_flag = "d_exofungus_blocker_flag"
					has_planet_flag = "d_egg_cracking_flag"
				}
			}
			add_modifier = { modifier = "pab_build_in_progress_modifier" days = 120	}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "d_dense_jungle_flag"
					has_planet_flag = "d_toxic_kelp_flag"
					has_planet_flag = "d_deep_sinkhole_flag"
					has_planet_flag = "d_quicksand_basin_flag"
					has_planet_flag = "d_noxious_swamp_flag"
					has_planet_flag = "d_massive_glacier_flag"
				}
			}
			add_modifier = { modifier = "pab_build_in_progress_modifier" days = 180	}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "d_dangerous_wildlife_blocker_flag"
					has_planet_flag = "d_radioactive_wasteland_flag"
					has_planet_flag = "d_bomb_crater_flag"
					has_planet_flag = "d_mountain_range_flag"
					has_planet_flag = "d_active_volcano_flag"
				}
			}
			add_modifier = { modifier = "pab_build_in_progress_modifier" days = 180	}
		}
		else_if = {
			limit = {
				OR = {
					has_planet_flag = "d_city_ruins_flag"
					has_planet_flag = "d_ruined_arcology_flag"
				}
			}
			add_modifier = { modifier = "pab_build_in_progress_modifier" days = 360	}
		}
	}
	else = {
		add_modifier = { modifier = "pab_build_in_progress_modifier" days = 5	}
	} #test build time
} #done

add_current_construction_modifier = {

	if = { limit = { has_planet_flag = "building_factory_3_flag" }
		add_modifier = { modifier = "building_factory_3_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_autocurating_vault_flag" }
		add_modifier = { modifier = "building_autocurating_vault_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_citadel_of_faith_flag" }
		add_modifier = { modifier = "building_citadel_of_faith_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_alpha_hub_flag" }
		add_modifier = { modifier = "building_alpha_hub_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_corporate_vault_flag" }
		add_modifier = { modifier = "building_corporate_vault_flag"  days = -1 }	
	}
	else_if = { limit = { has_planet_flag = "building_research_lab_3_flag" }
		add_modifier = { modifier = "building_research_lab_3_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_foundry_3_flag" }
		add_modifier = { modifier = "building_foundry_3_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_paradise_dome_flag" }
		add_modifier = { modifier = "building_paradise_dome_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_communal_housing_large_flag" } 
		add_modifier = { modifier = "building_communal_housing_large_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_drone_megastorage_flag" }
		add_modifier = { modifier = "building_drone_megastorage_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_expanded_warren_flag" }
		add_modifier = { modifier = "building_expanded_warren_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_commercial_megaplex_flag" }
		add_modifier = { modifier = "building_commercial_megaplex_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_factory_2_flag" }
		add_modifier = { modifier = "building_factory_2_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hypercomms_forum_flag" }
		add_modifier = { modifier = "building_hypercomms_forum_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_sacred_nexus_flag" }
		add_modifier = { modifier = "building_sacred_nexus_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "building_hive_confluence_flag" }
		add_modifier = { modifier = "building_hive_confluence_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_system_conflux_flag" }
		add_modifier = { modifier = "building_system_conflux_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_corporate_forum_flag" }
		add_modifier = { modifier = "building_corporate_forum_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hyper_entertainment_forum_flag" }
		add_modifier = { modifier = "building_hyper_entertainment_forum_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hospital_flag" }
		add_modifier = { modifier = "building_hospital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_energy_nexus_flag" }
		add_modifier = { modifier = "building_energy_nexus_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_research_lab_2_flag" }
		add_modifier = { modifier = "building_research_lab_2_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hall_judgment_flag" }
		add_modifier = { modifier = "building_hall_judgment_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_organic_paradise_flag" }
		add_modifier = { modifier = "building_organic_paradise_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_fortress_flag" }
		add_modifier = { modifier = "building_fortress_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_mineral_purification_hub_flag" }
		add_modifier = { modifier = "building_mineral_purification_hub_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_food_processing_center_flag" }
		add_modifier = { modifier = "building_food_processing_center_flag"  days = -1 }	
	}
	else_if = { limit = { has_planet_flag = "building_foundry_2_flag" }
		add_modifier = { modifier = "building_foundry_2_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_mineral_purification_plant_flag" }
		add_modifier = { modifier = "building_mineral_purification_plant_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_energy_grid_flag" }
		add_modifier = { modifier = "building_energy_grid_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_resource_silo_flag" }
		add_modifier = { modifier = "building_resource_silo_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_stronghold_flag" }
		add_modifier = { modifier = "building_stronghold_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_autochthon_monument_flag" }
		add_modifier = { modifier = "building_autochthon_monument_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_temple_flag" }
		add_modifier = { modifier = "building_temple_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hive_node_flag" }
		add_modifier = { modifier = "building_hive_node_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_uplink_node_flag" }
		add_modifier = { modifier = "building_uplink_node_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_corporate_monument_flag" }
		add_modifier = { modifier = "building_corporate_monument_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_bio_reactor_flag" }
		add_modifier = { modifier = "building_bio_reactor_flag"  days = -1 }	
	}
	else_if = { limit = { has_planet_flag = "building_maintenance_depot_flag" }
		add_modifier = { modifier = "building_maintenance_depot_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_slave_huts_flag" }
		add_modifier = { modifier = "building_slave_huts_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_overseer_homes_flag" }
		add_modifier = { modifier = "building_overseer_homes_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_clone_vats_flag" }
		add_modifier = { modifier = "building_clone_vats_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_mote_harvesters_flag" }
		add_modifier = { modifier = "building_mote_harvesters_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_gas_extractors_flag" }
		add_modifier = { modifier = "building_gas_extractors_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_crystal_mines_flag" }
		add_modifier = { modifier = "building_crystal_mines_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_betharian_power_plant_flag" }
		add_modifier = { modifier = "building_betharian_power_plant_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_xeno_zoo_flag" }
		add_modifier = { modifier = "building_xeno_zoo_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_food_processing_facility_flag" }
		add_modifier = { modifier = "building_food_processing_facility_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_generator_flag" }
		add_modifier = { modifier = "district_generator_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_mining_flag" }
		add_modifier = { modifier = "district_mining_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_farming_flag" }
		add_modifier = { modifier = "district_farming_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_generator_uncapped_flag" }
		add_modifier = { modifier = "district_generator_uncapped_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_mining_uncapped_flag" }
		add_modifier = { modifier = "district_mining_uncapped_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_farming_uncapped_flag" }
		add_modifier = { modifier = "district_farming_uncapped_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_machine_assembly_plant_flag" }
		add_modifier = { modifier = "building_machine_assembly_plant_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_commercial_zone_flag" }
		add_modifier = { modifier = "building_commercial_zone_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hydroponics_farm_flag" }
		add_modifier = { modifier = "building_hydroponics_farm_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_luxury_residence_flag" }
		add_modifier = { modifier = "building_luxury_residence_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_communal_housing_flag" }
		add_modifier = { modifier = "building_communal_housing_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_drone_storage_flag" }
		add_modifier = { modifier = "building_drone_storage_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hive_warren_flag" }
		add_modifier = { modifier = "building_hive_warren_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "building_holo_theatres_flag" }
		add_modifier = { modifier = "building_holo_theatres_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_clinic_flag" }
		add_modifier = { modifier = "building_clinic_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "building_spawning_pool_flag" }
		add_modifier = { modifier = "building_spawning_pool_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_foundry_1_flag" }
		add_modifier = { modifier = "building_foundry_1_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_factory_1_flag" }
		add_modifier = { modifier = "building_factory_1_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_slave_processing_flag" }
		add_modifier = { modifier = "building_slave_processing_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_precinct_house_flag" }
		add_modifier = { modifier = "building_precinct_house_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_sentinel_posts_flag" }
		add_modifier = { modifier = "building_sentinel_posts_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_organic_sanctuary_flag" }
		add_modifier = { modifier = "building_organic_sanctuary_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_research_lab_1_flag" }
		add_modifier = { modifier = "building_research_lab_1_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_heritage_site_flag" }
		add_modifier = { modifier = "building_heritage_site_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_holotemple_flag" }
		add_modifier = { modifier = "building_holotemple_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hive_cluster_flag" }
		add_modifier = { modifier = "building_hive_cluster_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_network_junction_flag" }
		add_modifier = { modifier = "building_network_junction_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_corporate_site_flag" }
		add_modifier = { modifier = "building_corporate_site_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_noble_estates_flag" }
		add_modifier = { modifier = "building_noble_estates_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "building_military_academy_flag" }
		add_modifier = { modifier = "building_military_academy_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_hab_housing_flag" }
		add_modifier = { modifier = "district_hab_housing_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_hab_energy_flag" }
		add_modifier = { modifier = "district_hab_energy_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_hab_cultural_flag" }
		add_modifier = { modifier = "district_hab_cultural_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_hab_science_flag" }
		add_modifier = { modifier = "district_hab_science_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_hab_commercial_flag" }
		add_modifier = { modifier = "district_hab_commercial_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_robot_assembly_plant_flag" }
		add_modifier = { modifier = "building_robot_assembly_plant_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_city_flag" }
		add_modifier = { modifier = "district_city_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_hive_flag" }
		add_modifier = { modifier = "district_hive_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_nexus_flag" }
		add_modifier = { modifier = "district_nexus_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_ministry_production_flag" }
		add_modifier = { modifier = "building_ministry_production_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_production_center_flag" }
		add_modifier = { modifier = "building_production_center_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_chemical_plant_flag" }
		add_modifier = { modifier = "building_chemical_plant_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_refinery_flag" }
		add_modifier = { modifier = "building_refinery_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_crystal_plant_flag" }
		add_modifier = { modifier = "building_crystal_plant_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_bureaucratic_complex_flag"  }
		add_modifier = { modifier = "building_bureaucratic_complex_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_psi_corps_flag" }
		add_modifier = { modifier = "building_psi_corps_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_galactic_stock_exchange_flag" }
		add_modifier = { modifier = "building_galactic_stock_exchange_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_institute_flag" }
		add_modifier = { modifier = "building_institute_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_supercomputer_flag" }
		add_modifier = { modifier = "building_supercomputer_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_capital_flag" }
		add_modifier = { modifier = "building_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_machine_capital_flag" }
		add_modifier = { modifier = "building_machine_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_hab_major_capital_flag" }
		add_modifier = { modifier = "building_hab_major_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_resort_major_capital_flag" }
		add_modifier = { modifier = "building_resort_major_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_slave_major_capital_flag" }
		add_modifier = { modifier = "building_slave_major_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_planetary_shield_generator_flag" }
		add_modifier = { modifier = "building_planetary_shield_generator_flag"  days = -1 }	
	}
	else_if = { limit = { has_planet_flag = "building_hive_major_capital_flag" }
		add_modifier = { modifier = "building_hive_major_capital_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "district_arcology_housing_flag" }
		add_modifier = { modifier = "district_arcology_housing_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "district_arcology_arms_industry_flag" }
		add_modifier = { modifier = "district_arcology_arms_industry_flag"  days = -1 }
	}	
	else_if = { limit = { has_planet_flag = "district_arcology_civilian_industry_flag" }
		add_modifier = { modifier = "district_arcology_civilian_industry_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "district_arcology_leisure_flag" }
		add_modifier = { modifier = "district_arcology_leisure_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_nanite_transmuter_flag" }
		add_modifier = { modifier = "building_nanite_transmuter_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_major_capital_flag" }
		add_modifier = { modifier = "building_major_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_machine_major_capital_flag" }
		add_modifier = { modifier = "building_machine_major_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_system_capital_flag" }
		add_modifier = { modifier = "building_system_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "building_machine_system_capital_flag" }
		add_modifier = { modifier = "building_machine_system_capital_flag"  days = -1 }
	}
	else_if = { limit = { has_planet_flag = "d_infestation_flag"}
		add_modifier = { modifier = "d_infestation_flag" days = -1 }
	}
	else_if = { limit = { has_planet_flag = "d_quarantine_zone_flag"}
		add_modifier = { modifier = "d_quarantine_zone_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_slums_flag"}
		add_modifier = { modifier = "d_slums_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_crater_flag"}
		add_modifier = { modifier = "d_crater_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_dead_subterraneans_flag"}
		add_modifier = { modifier = "d_dead_subterraneans_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_sinkhole_subterraneans_flag"}
		add_modifier = { modifier = "d_sinkhole_subterraneans_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_failing_infrastructure_flag"}
		add_modifier = { modifier = "d_failing_infrastructure_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_decrepit_dwellings_flag"}
		add_modifier = { modifier = "d_decrepit_dwellings_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_tomb_world_ruins_flag"}
		add_modifier = { modifier = "d_tomb_world_ruins_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_tomb_world_wasteland_flag"}
		add_modifier = { modifier = "d_tomb_world_wasteland_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_machine_empire_ruins_flag"}
		add_modifier = { modifier = "d_machine_empire_ruins_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_exterminators_ruins_flag"}
		add_modifier = { modifier = "d_exterminators_ruins_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_former_battlefield_flag"}
		add_modifier = { modifier = "d_former_battlefield_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_strip_mine_flag"}
		add_modifier = { modifier = "d_strip_mine_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_unsupervised_settlement_flag"}
		add_modifier = { modifier = "d_unsupervised_settlement_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_collapsed_burrows_flag"}
		add_modifier = { modifier = "d_collapsed_burrows_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_assimilators_ruins_flag"}
		add_modifier = { modifier = "d_assimilators_ruins_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_fungoid_extermination_flag"}
		add_modifier = { modifier = "d_fungoid_extermination_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_exofungus_blocker_flag"}
		add_modifier = { modifier = "d_exofungus_blocker_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_egg_cracking_flag"}
		add_modifier = { modifier = "d_egg_cracking_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_dense_jungle_flag"}
		add_modifier = { modifier = "d_dense_jungle_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_toxic_kelp_flag"}
		add_modifier = { modifier = "d_toxic_kelp_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_deep_sinkhole_flag"}
		add_modifier = { modifier = "d_deep_sinkhole_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_quicksand_basin_flag"}
		add_modifier = { modifier = "d_quicksand_basin_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_noxious_swamp_flag"}
		add_modifier = { modifier = "d_noxious_swamp_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_massive_glacier_flag"}
		add_modifier = { modifier = "d_massive_glacier_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_dangerous_wildlife_blocker_flag"}
		add_modifier = { modifier = "d_dangerous_wildlife_blocker_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_radioactive_wasteland_flag"}
		add_modifier = { modifier = "d_radioactive_wasteland_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_bomb_crater_flag"}
		add_modifier = { modifier = "d_bomb_crater_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_mountain_range_flag"}
		add_modifier = { modifier = "d_mountain_range_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_active_volcano_flag"}
		add_modifier = { modifier = "d_active_volcano_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_city_ruins_flag"}
		add_modifier = { modifier = "d_city_ruins_flag" days = -1 }}
	else_if = { limit = { has_planet_flag = "d_ruined_arcology_flag"}
		add_modifier = { modifier = "d_ruined_arcology_flag" days = -1 }}
} #done

pab_build_capital = {
	if = {
		limit = { has_building = "building_colony_shelter" }
		set_planet_flag = "building_capital_flag"
	}
	else_if = {
		limit = { has_building = "building_capital" }
		set_planet_flag = "building_major_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_major_capital" }
		set_planet_flag = "building_system_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_deployment_post" }
		set_planet_flag = "building_machine_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_machine_capital" }
		set_planet_flag = "building_machine_major_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_machine_major_capital" }
		set_planet_flag = "building_machine_system_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_hive_capital" }
		set_planet_flag = "building_hive_major_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_hab_capital" }
		set_planet_flag = "building_hab_major_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_resort_capital" }
		set_planet_flag = "building_resort_major_capital_flag"	
	}
	else_if = {
		limit = { has_building = "building_slave_capital" }
		set_planet_flag = "building_slave_major_capital_flag"	
	}
}

pab_build_growth = {
	if = {
		limit = { 
			owner = { has_ascension_perk = ap_engineered_evolution }
			NOT = { has_building = building_clone_vats }
		}
		set_planet_flag = "building_clone_vats_flag"
	}
	else_if = {
		limit = { 
			owner = { is_hive_empire = yes }
			NOT = { has_building = building_spawning_pool }
		}
		set_planet_flag = "building_spawning_pool_flag"
	}
	else_if = {
		limit = { 
			owner = { is_machine_empire = yes }
			NOT = { has_building = building_machine_assembly_plant }
		}
		set_planet_flag = "building_machine_assembly_plant_flag"
	}
	else_if = {
		limit = { 
			owner = {
				 has_technology = tech_robotic_workers 
				 NOT = { is_gestalt = no }
			}
			NOT = { has_building = building_robot_assembly_plant }
		}
		set_planet_flag = "building_robot_assembly_plant_flag"
	}
	else_if = {
		limit = { 
			owner = { is_gestalt = no }
			NOT = { has_building = building_clinic }
		}
		set_planet_flag = "building_clinic_flag"
	}
}

pab_build_unity = {

	if = {
		limit = { owner ={ is_hive_empire = yes }}
		set_planet_flag = "building_hive_node_flag"
	}
	else_if = {
		limit = {owner = { is_machine_empire = yes }}
		set_planet_flag = "building_uplink_node_flag"
	}
	else_if = {
		limit = {owner = { is_spiritualist = yes }}
		set_planet_flag = "building_temple" 
	}
	else_if = {
		limit = {owner = { is_megacorp = yes }}
		set_planet_flag = "building_corporate_monument" 
	}
	else_if = {
		limit = {
			owner = { 
				is_megacorp = no
				is_spiritualist = yes
				is_gestalt = no
			}
		}
		set_planet_flag = "building_autochthon_monument" 
	}
}

pab_build_housing = {
	if = {
		limit = { is_planet_class = pc_city }
		set_planet_flag = "district_arcology_housing_flag"
	}
	else_if = {
		limit = { is_planet_class = pc_habitat }
		set_planet_flag = "district_hab_housing_flag"
	}
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		set_planet_flag = "district_hive_flag"
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		set_planet_flag = "district_nexus_flag"
	}
	else = {
		set_planet_flag = "district_city_flag"
	}
}

pab_build_amenities = {
	if = {
		limit = { owner = { is_gestalt = yes }}
		set_planet_flag = "building_maintenance_depot_flag"
	}
	else_if = {
		limit = { owner = { has_technology = tech_holo_entertainment } }
		set_planet_flag = "building_holo_theatres_flag"
	}
}

pab_build_crime = {
	if = {
		limit = { owner = { is_gestalt = yes } }
		set_planet_flag = "building_sentinel_posts_flag"
	}
	else_if = {
		limit = { has_modifier = slave_colony}
		set_planet_flag = "building_overseer_homes_flag"
	}
	else = {
		set_planet_flag = "building_precinct_house_flag"
	}
}

pab_build_resource_focus = {
	if = {
		limit = { 
			has_planet_flag = "pab_mineral"
            owner = { has_technology = tech_mineral_purification_1 }
            NOT = { has_building =  building_mineral_purification_plant }
            NOT = { has_building =  building_mineral_purification_hub }
			}
		set_planet_flag = "building_mineral_purification_plant_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = "pab_energy"
            owner = { has_technology = tech_power_hub_1 }
            NOT = { has_building =  building_energy_grid }
            NOT = { has_building =  building_energy_nexus }
		}
		set_planet_flag = "building_energy_grid_flag"
	}
	else_if = {
		limit = {
			has_planet_flag = "pab_food"
            owner = { has_technology = tech_food_processing_1 }
            NOT = { has_building =  building_food_processing_facility }
            NOT = { has_building =  building_food_processing_center }
			}
		set_planet_flag = "building_food_processing_facility_flag"
	}
}

pab_build_manufacture_focus = {
	if = {
		limit = { 
			OR = {
				has_planet_flag = "pab_alloy" 
				has_planet_flag = "pab_consumer"
			}
			owner = { is_gestalt = no }
		}
		set_planet_flag = "building_ministry_production_flag"
	}
	else_if = {
		limit = {
			OR = {
			 	has_planet_flag = "pab_alloy"  
			 	has_planet_flag = "pab_consumer"
			}
			owner = { is_gestalt = yes }
		}
		set_planet_flag = "building_production_center_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = "pab_research" 
			owner = { is_gestalt = no }
		}
		set_planet_flag = "building_institute_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = "pab_research" 
			owner = { is_gestalt = yes }
		}
		set_planet_flag = "building_supercomputer_flag"
	}
	else_if = {
		limit = {  has_planet_flag = "pab_trade" }
		set_planet_flag = "building_galactic_stock_exchange_flag"
	}
}

pab_build_focus_buildings = {
	if = {
		limit = { has_planet_flag = "pab_alloy" }
		set_planet_flag = "building_foundry_1_flag"
	}
	else_if = {
		limit = { has_planet_flag = "pab_consumer" }
		set_planet_flag = "building_factory_1_flag"
	}
	else_if = {
		limit = { has_planet_flag = "pab_research" }
		set_planet_flag = "building_research_lab_1_flag"
	}
	else_if = {
		limit = { has_planet_flag = "pab_trade" }
		set_planet_flag = "building_commercial_zone_flag"
	}
	else_if = {
		limit = { has_planet_flag = "pab_refinery" }
		if = {
			limit = { 
				owner = {
					has_technology = tech_exotic_gases 
					has_monthly_income = {
						resource = exotic_gases
						value < 5
					}
				}
			}
			set_planet_flag = "building_refinery_flag"
		}
		else_if = {
			limit = { 
				owner = {
					has_technology = tech_volatile_motes 
					has_monthly_income = {
						resource = volatile_motes
						value < 5
					}
				}
			}
			set_planet_flag = "building_chemical_plant_flag"
		}
		else_if = {
			limit = { 
				owner = {
					has_technology = tech_rare_crystals 
					has_monthly_income = {
						resource = rare_crystals
						value < 5
					}
				}
			}
			set_planet_flag = "building_crystal_plant_flag"
		}
	}
	else_if = {
		limit = { has_planet_flag = "pab_bastion" }
		set_planet_flag = "building_stronghold_flag"
	}
}

pab_build_disctrict_focus = {
	if = {
		limit = {
			has_planet_flag = "pab_mineral"
			has_planet_flag = "pab_energy"
			has_planet_flag = "pab_food"
		}
		random_list = {
			34 = {
				modifier = {
					pab_can_build_mining_districts = no
					factor = 0
				} 
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_machine 
						}
					}
					set_planet_flag = "district_mining_uncapped_flag"
				}
				else = {
					set_planet_flag = "district_mining_flag"
				}
			}
			33 = {
				modifier = {
					pab_can_build_energy_districts = no
					factor = 0
				} 
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_machine 
							is_planet_class = pc_ringworld_habitable
						}
					}
					set_planet_flag = "district_generator_uncapped_flag"
				}
				else = {
					set_planet_flag = "district_generator_flag"
				}
			}
			33 = {
				modifier = {
					pab_can_build_food_districts = no
					factor = 0
				}
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive 
							is_planet_class = pc_ringworld_habitable
						}
					}
					set_planet_flag = "district_farming_uncapped_flag"
				}
				else_if = {
					limit = { NOT = { is_planet_class = pc_machine }}
					set_planet_flag = "district_farming_flag"
				}
			}
		}
	}
	else_if = {
		limit = {
			has_planet_flag = "pab_mineral"
			has_planet_flag = "pab_energy"
		}
		random_list = {
			50 = {
				modifier = {
					pab_can_build_mining_districts = no
					factor = 0
				} 
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_machine 
						}
					}
					set_planet_flag = "district_mining_uncapped_flag"
				}
				else = {
					set_planet_flag = "district_mining_flag"
				}
			}
			50 = {
				modifier = {
					pab_can_build_energy_districts = no
					factor = 0
				} 
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_machine 
							is_planet_class = pc_ringworld_habitable
						}
					}
					set_planet_flag = "district_generator_uncapped_flag"
				}
				else = {
					set_planet_flag = "district_generator_flag"
				}
			}
		}

	}
	else_if = {
		limit = {
			has_planet_flag = "pab_mineral"
			has_planet_flag = "pab_food"
		 }
		 random_list = {
			50 = {
				modifier = {
					pab_can_build_mining_districts = no
					factor = 0
				} 
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_machine 
						}
					}
					set_planet_flag = "district_mining_uncapped_flag"
				}
				else = {
					set_planet_flag = "district_mining_flag"
				}
			}
			50 = {
				modifier = {
					pab_can_build_food_districts = no
					factor = 0
				}
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive 
							is_planet_class = pc_ringworld_habitable
						}
					}
					set_planet_flag = "district_farming_uncapped_flag"
				}
				else_if = {
					limit = { NOT = { is_planet_class = pc_machine }}
					set_planet_flag = "district_farming_flag"
				}
			}
		}
		
	}
	else_if = {
		limit = {
			has_planet_flag = "pab_energy"
			has_planet_flag = "pab_food"
		 }
		 random_list = {
			50 = {
				modifier = {
					pab_can_build_energy_districts = no
					factor = 0
				} 
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive
							is_planet_class = pc_machine 
							is_planet_class = pc_ringworld_habitable
						}
					}
					set_planet_flag = "district_generator_uncapped_flag"
				}
				else = {
					set_planet_flag = "district_generator_flag"
				}
			}
			50 = {
				modifier = {
					pab_can_build_food_districts = no
					factor = 0
				}
				if = {
					limit = { 
						OR = {
							is_planet_class = pc_hive 
							is_planet_class = pc_ringworld_habitable
						}
					}
					set_planet_flag = "district_farming_uncapped_flag"
				}
				else_if = {
					limit = { NOT = { is_planet_class = pc_machine }}
					set_planet_flag = "district_farming_flag"
				}
			}
		}		
	}
	else_if = {
		limit = { has_planet_flag = "pab_mineral" }
		if = {
			limit = { 
				OR = {
					is_planet_class = pc_hive
					is_planet_class = pc_machine 
				}
			}
			set_planet_flag = "district_mining_uncapped_flag"
		}
		else = {
			set_planet_flag = "district_mining_flag"
		}
	}
	else_if = {
		limit = { has_planet_flag = "pab_energy" }
		if = {
			limit = { 
				OR = {
					is_planet_class = pc_hive
					is_planet_class = pc_machine 
					is_planet_class = pc_ringworld_habitable
				}
			}
			set_planet_flag = "district_generator_uncapped_flag"
		}
		else_if = {
			limit = { is_planet_class = pc_habitat }
			set_planet_flag = "district_hab_energy_flag"
		}
		else = {
			set_planet_flag = "district_generator_flag"
		}
	}
	else_if = {
		limit = { has_planet_flag = "pab_food" }
		if = {
			limit = { 
				OR = {
					is_planet_class = pc_hive 
					is_planet_class = pc_ringworld_habitable
				}
			}
			set_planet_flag = "district_farming_uncapped_flag"
		}
		else_if = {
			limit = { NOT = { is_planet_class = pc_machine }}
			set_planet_flag = "district_farming_flag"
		}
	}
	else_if = {
		limit = { 
			is_planet_class = pc_city
			has_planet_flag = "pab_alloy"
		}
		set_planet_flag = "district_arcology_arms_industry_flag"
	}
	else_if = {
		limit = { 
			is_planet_class = pc_city
			has_planet_flag = "pab_consumer"
		}
		set_planet_flag = "district_arcology_civilian_industry_flag"
	}
	else_if = {
		limit = { 
			is_planet_class = pc_habitat
			has_planet_flag = "pab_research"
		}
		set_planet_flag = "district_hab_science_flag"
	}
	else_if = {
		limit = { 
			is_planet_class = pc_habitat
			has_planet_flag = "pab_trade"
		}
		set_planet_flag = "district_hab_commercial_flag"
	}
}

pab_build_desposit = {

	if = {
		limit = { has_deposit = d_betharian_deposit }
		set_planet_flag = "building_betharian_power_plant_flag"
	}
	else_if = {
		limit = { 
			OR = {
                AND = {
                    has_planet_flag = "gas_count_1"
                    num_buildings = {
                    type = building_gas_extractors
                    value < 1
                    }
                }
                AND = {
                    has_planet_flag = "gas_count_2"
                    num_buildings = {
                    type = building_gas_extractors
                    value < 2
                    }
                }
                AND = {
                    has_planet_flag = "gas_count_3"
                    num_buildings = {
                    type = building_gas_extractors
                    value < 3
                    }
                }
            }
            NOT = { has_modifier = resort_colony }
            owner = { has_technology = tech_mine_exotic_gases }
		 }
		set_planet_flag = "building_gas_extractors_flag"
	}
	else_if = {
		limit = { 
			OR = {
                AND = {
                    has_planet_flag = "mote_count_1"
                    num_buildings = {
                    type = building_mote_harvesters
                    value < 1
                    }
                }
                AND = {
                    has_planet_flag = "mote_count_2"
                    num_buildings = {
                    type = building_mote_harvesters
                    value < 2
                    }
                }
                AND = {
                    has_planet_flag = "mote_count_3"
                    num_buildings = {
                    type = building_mote_harvesters
                    value < 3
                    }
                }
            }
            NOT = { has_modifier = resort_colony }
            owner = { has_technology = tech_mine_volatile_motes }
		 }
		set_planet_flag = "building_mote_harvesters_flag"
	}
	else_if = {
		limit = { 
			OR = {
                AND = {
                    has_planet_flag = "crystal_count_1"
                    num_buildings = {
                    type = building_crystal_mines
                    value < 1
                    }
                }
                AND = {
                    has_planet_flag = "crystal_count_2"
                    num_buildings = {
                    type = building_crystal_mines
                    value < 2
                    }
                }
                AND = {
                    has_planet_flag = "crystal_count_3"
                    num_buildings = {
                    type = building_crystal_mines
                    value < 3
                    }
                }
            }
            NOT = { has_modifier = resort_colony }
            owner = { has_technology = tech_mine_rare_crystals }
		 }
		set_planet_flag = "building_crystal_mines_flag"
	}
	else_if = {
		limit = { has_deposit = d_alien_pets_deposit}
		set_planet_flag = "building_xeno_zoo_flag"
	}
}

pab_remove_blocker = {
	if = {
		limit = {
			any_deposit = { is_deposit_type = d_dense_jungle }
			owner = { has_technology = tech_dense_jungle }
		}
		set_planet_flag = "d_dense_jungle_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_toxic_kelp }
			owner = { has_technology = tech_toxic_kelp }
		}
		set_planet_flag = "d_toxic_kelp_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_deep_sinkhole }
			owner = { has_technology = tech_deep_sinkhole }
		}
		set_planet_flag = "d_deep_sinkhole_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_quicksand_basin }
			owner = { has_technology = tech_quicksand_basin }
		}
		set_planet_flag = "d_quicksand_basin_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_noxious_swamp }
			owner = { has_technology = tech_noxious_swamp }
		}
		set_planet_flag = "d_noxious_swamp_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_massive_glacier }
			owner = { has_technology = tech_massive_glacier }
		}
		set_planet_flag = "d_massive_glacier_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_dangerous_wildlife_blocker }
			owner = { has_technology = tech_dangerous_wildlife }
		}
		set_planet_flag = "d_dangerous_wildlife_blocker_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_mountain_range }
			owner = { has_technology = tech_mountain_range }
		}
		set_planet_flag = "d_mountain_range_flag"
	}
	else_if = {
		limit = {
			any_deposit = { is_deposit_type = d_active_volcano }
			owner = { has_technology = tech_volcano }
		}
		set_planet_flag = "d_active_volcano_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_infestation }}
		set_planet_flag = "d_infestation_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_quarantine_zone }}
		set_planet_flag = "d_quarantine_zone_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_slums }}
		set_planet_flag = "d_slums_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_crater }}
		set_planet_flag = "d_crater_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_dead_subterraneans }}
		set_planet_flag = "d_dead_subterraneans_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_sinkhole_subterraneans }}
		set_planet_flag = "d_sinkhole_subterraneans_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_failing_infrastructure }}
		set_planet_flag = "d_failing_infrastructure_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_decrepit_dwellings }}
		set_planet_flag = "d_decrepit_dwellings_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_tomb_world_ruins }}
		set_planet_flag = "d_tomb_world_ruins_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_tomb_world_wasteland }}
		set_planet_flag = "d_tomb_world_wasteland_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_machine_empire_ruins }}
		set_planet_flag = "d_machine_empire_ruins_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_exterminators_ruins }}
		set_planet_flag = "d_exterminators_ruins_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_former_battlefield }}
		set_planet_flag = "d_former_battlefield_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_strip_mine }}
		set_planet_flag = "d_strip_mine_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_unsupervised_settlement }}
		set_planet_flag = "d_unsupervised_settlement_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_collapsed_burrows }}
		set_planet_flag = "d_collapsed_burrows_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_assimilators_ruins }}
		set_planet_flag = "d_assimilators_ruins_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_fungoid_extermination }}
		set_planet_flag = "d_fungoid_extermination_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_exofungus_blocker }}
		set_planet_flag = "d_exofungus_blocker_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_egg_cracking }}
		set_planet_flag = "d_egg_cracking_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_radioactive_wasteland }}
		set_planet_flag = "d_radioactive_wasteland_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_bomb_crater }}
		set_planet_flag = "d_bomb_crater_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_city_ruins }}
		set_planet_flag = "d_city_ruins_flag"
	}
	else_if = {
		limit = { any_deposit = { is_deposit_type = d_ruined_arcology }}
		set_planet_flag = "d_ruined_arcology_flag"
	}
}

pab_replace_building = {
	if = {
		limit = { has_planet_flag = pab_alloy }
		if = { limit = { has_building = building_foundry_1 }
			remove_building = building_foundry_1
		}
		else_if = { limit = { has_building = building_foundry_2 }
		remove_building = building_foundry_2
		}
		else_if = { limit = { has_building = building_foundry_3 }
		remove_building = building_foundry_3
		}
	}
	else_if = {
		limit = { has_planet_flag = pab_consumer }
		if = { limit = { has_building = building_factory_1 }
			remove_building = building_factory_1
		}
		else_if = { limit = { has_building = building_factory_2 }
		remove_building = building_factory_2
		}
		else_if = { limit = { has_building = building_factory_3 }
		remove_building = building_factory_3
		}
	}
	else_if = {
		limit = { has_planet_flag = pab_research }
		if = { limit = { has_building = building_research_lab_1 }
			remove_building = building_research_lab_1
		}
		else_if = { limit = { has_building = building_research_lab_2 }
		remove_building = building_research_lab_2
		}
		else_if = { limit = { has_building = building_research_lab_3 }
		remove_building = building_research_lab_3
		}
	}
	else_if = {
		limit = { has_planet_flag = pab_trade }
		if = { limit = { has_building = building_commercial_zone }
			remove_building = building_commercial_zone
		}
		else_if = { limit = { has_building = building_commercial_megaplex }
		remove_building = building_commercial_megaplex
		}
	}
	else_if = {
		limit = { has_planet_flag = pab_bastion }
		if = { limit = { has_building = building_stronghold }
			remove_building = building_stronghold
		}
		else_if = { limit = { has_building = building_fortress }
		remove_building = building_fortress
		}
	}
	else_if = {
		limit = { has_planet_flag = pab_refinery }
		if = { limit = { has_building = building_crystal_plant }
			remove_building = building_crystal_plant
		}
		else_if = { limit = { has_building = building_refinery }
		remove_building = building_refinery
		}
		else_if = { limit = { has_building = building_chemical_plant }
		remove_building = building_chemical_plant
		}
	}
}

pab_replace_districts = {
	if = {
		limit = { free_housing <= -3 }
		if = {limit = { has_planet_flag = pab_mineral }
			if = {limit = { has_district = district_mining }
				remove_district = district_mining
			}
			else_if = {limit = { has_district = district_mining_uncapped }
				remove_district = district_mining_uncapped
			}
		}
		else_if = {limit = { has_planet_flag = pab_food }
			if = {limit = { has_district = district_farming }
				remove_district = district_farming
			}
			else_if = {limit = { has_district = district_farming_uncapped }
				remove_district = district_farming_uncapped
			}
		}
		else_if = {limit = { has_planet_flag = pab_energy }
			if = {limit = { has_district = district_generator }
				remove_district = district_generator
			}
			else_if = {limit = { has_district = district_generator_uncapped }
				remove_district = district_generator_uncapped
			}
		}
	}
	else_if = {
		limit = { free_housing >= 10 }
		if = {limit = { has_district = district_city }
				remove_district = district_city
			}
			else_if = {limit = { has_district = district_hive }
				remove_district = district_hive
			}
			else_if = {limit = { has_district = district_nexus }
				remove_district = district_nexus
			}
	}
}

pab_upgrade_tier2 = {
	if = {
		limit = { 
			has_building = building_autochthon_monument 
			owner = { has_technology = tech_heritage_site }
		}
		set_planet_flag = "building_heritage_site_flag"
	}
	else_if = {
		limit = { 
			has_building = building_temple 
			owner = { has_technology = tech_holographic_rituals }
		}
		set_planet_flag = "building_holotemple_flag"
	}
	else_if = {
		limit = { 
			has_building = building_hive_node 
			owner = { has_technology = tech_hive_cluster }
		}
		set_planet_flag = "building_hive_cluster_flag"
	}
	else_if = {
		limit = { 
			has_building = building_uplink_node 
			owner = { has_technology = tech_heritage_site }
		}
		set_planet_flag = "building_network_junction_flag"
	}
	else_if = {
		limit = { 
			has_building = building_corporate_monument 
			owner = { has_technology = tech_heritage_site }
		}
		set_planet_flag = "building_corporate_site_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_energy
			has_building = building_energy_grid
			owner = { has_technology = tech_power_hub_2 }
		}
		set_planet_flag = "building_energy_nexus_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_mineral
			has_building = building_mineral_purification_plant
			owner = { has_technology = tech_mineral_purification_2 }
		}
		set_planet_flag = "building_mineral_purification_hub_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = "pab_food"
			has_building = building_food_processing_facility
			owner = { has_technology = tech_food_processing_2 }
		}
		set_planet_flag = "building_food_processing_center_flag"
	}
	else_if = {
		limit = { 
			has_building = building_clinic
			owner = { has_technology = tech_frontier_hospital }
		}
		set_planet_flag = "building_hospital_flag"
	}
	else_if = {
		limit = { 
			free_amenities <= 0
			has_building = building_holo_theatres
			owner = { has_technology = tech_hyper_entertainment_forum }
		}
		set_planet_flag = "building_hyper_entertainment_forum_flag"
	}
	else_if = {
		limit = { 
			planet_crime >= 20
			has_building = building_precinct_house
			owner = { has_technology = tech_colonial_centralization }
		}
		set_planet_flag = "building_hall_judgment_flag"
	}
	else_if = {
		limit = { 
		has_planet_flag = pab_research
		has_building = building_research_lab_1
		owner = { has_technology = tech_basic_science_lab_2 }
		}
		set_planet_flag = "building_research_lab_2_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_bastion
			has_building = building_stronghold
			owner = { has_technology = tech_global_defense_grid }
		}
		set_planet_flag = "building_fortress_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_alloy
			has_building = building_foundry_1
			owner = { has_technology = tech_alloys_1 }
		}
		set_planet_flag = "building_foundry_2_flag"
	}
	else_if = {
		limit = {
			has_planet_flag = pab_trade
			has_building = building_commercial_zone
			owner = { has_technology = tech_interstellar_economics }
		}
		set_planet_flag = "building_commercial_megaplex_flag"
	}
	else_if = {
		limit = {
			has_planet_flag = pab_consumer
			has_building = building_factory_1
			owner = { has_technology = tech_luxuries_1 }
		}
		set_planet_flag = "building_factory_2_flag"
	}
}

pab_upgrade_tier3 = {
	if = {
		limit = { 
			has_building = building_heritage_site 
			owner = { has_technology = tech_hypercomms_forum }
		}
		set_planet_flag = "building_hypercomms_forum_flag"
	}
	else_if = {
		limit = { 
			has_building = building_holotemple 
			owner = { has_technology = tech_consecration_fields }
		}
		set_planet_flag = "building_sacred_nexus_flag"
	}
	else_if = {
		limit = { 
			has_building = building_hive_cluster 
			owner = { has_technology = tech_hive_confluence }
		}
		set_planet_flag = "building_hive_confluence_flag"
	}
	else_if = {
		limit = { 
			has_building = building_network_junction 
			owner = { has_technology = tech_hypercomms_forum }
		}
		set_planet_flag = "building_system_conflux_flag"
	}
	else_if = {
		limit = { 
			has_building = building_corporate_site 
			owner = { has_technology = tech_hypercomms_forum }
		}
		set_planet_flag = "building_corporate_forum_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_research
			has_building = building_research_lab_2
			owner = { has_technology = tech_basic_science_lab_3 }
		}
		set_planet_flag = "building_research_lab_3_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_alloy
			has_building = building_foundry_2
			owner = { has_technology = tech_alloys_2 }
		}
		set_planet_flag = "building_foundry_3_flag"
	}
	else_if = {
		limit = { 
			has_planet_flag = pab_consumer
			has_building = building_factory_2
			owner = { has_technology = tech_luxuries_2 }
		}
		set_planet_flag = "building_factory_3_flag"
	}
}

pab_upgrade_tier4 = {
	if = {
		limit = { 
			has_building = building_hypercomms_forum 
			owner = { has_technology = tech_autocurating_vault }
		}
		set_planet_flag = "building_autocurating_vault_flag"
	}
	else_if = {
		limit = { 
			has_building = building_sacred_nexus 
			owner = { has_technology = tech_consecration_fields }
		}
		set_planet_flag = "building_citadel_of_faith_flag"
	}
	else_if = {
		limit = { 
			has_building = building_system_conflux 
			owner = { has_technology = tech_autocurating_vault }
		}
		set_planet_flag = "building_alpha_hub_flag"
	}
	else_if = {
		limit = { 
			has_building = building_corporate_forum 
			owner = { has_technology = tech_autocurating_vault }
		}
		set_planet_flag = "building_corporate_vault_flag"
	}
}

pab_delete_wrong_focus_buidlings = {

		if = { limit = { 
			NOT = { has_planet_flag = pab_trade } 
			has_building = building_commercial_zone 
			}
			remove_building = building_commercial_zone
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_trade }
			has_building = building_commercial_megaplex 
			}
			remove_building = building_commercial_megaplex
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_trade }
			has_building = building_galactic_stock_exchange
		 	}
			remove_building = building_galactic_stock_exchange
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_research }
			has_building = building_research_lab_1
		 	}
			remove_building = building_research_lab_1
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_research }
			has_building = building_research_lab_2
		 	}
			remove_building = building_research_lab_2
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_research }
			has_building = building_research_lab_3
		 	}
			remove_building = building_research_lab_3
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_research }
			has_building = building_institute
		 	}
			remove_building = building_institute
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_research }
			has_building = building_supercomputer
		 	}
			remove_building = building_supercomputer
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_consumer }
			has_building = building_factory_1
		 	}
			remove_building = building_factory_1
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_consumer }
			has_building = building_factory_2
		 	}
			remove_building = building_factory_2
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_consumer }
			has_building = building_factory_3
		 	}
			remove_building = building_factory_3
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_consumer }
			NOT = { has_planet_flag = pab_alloy }
			has_building = building_ministry_production
		 	}
			remove_building = building_ministry_production
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_consumer }
			NOT = { has_planet_flag = pab_alloy }
			has_building = building_production_center
		 	}
			remove_building = building_production_center
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_alloy }
			has_building = building_foundry_1
		 	}
			remove_building = building_foundry_1
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_alloy }
			has_building = building_foundry_2
		 	}
			remove_building = building_foundry_2
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_alloy }
			has_building = building_foundry_3
		 	}
			remove_building = building_foundry_3
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_refinery }
			has_building = building_refinery
		 	}
			remove_building = building_refinery
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_refinery }
			has_building = building_chemical_plant
		 	}
			remove_building = building_chemical_plant
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_refinery }
			has_building = building_crystal_plant
		 	}
			remove_building = building_crystal_plant
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_bastion }
			has_building = building_stronghold
		 	}
			remove_building = building_stronghold
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_bastion }
			has_building = building_fortress
		 	}
			remove_building = building_fortress
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_food }
			has_building = building_food_processing_facility
		 	}
			remove_building = building_food_processing_facility
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_food }
			has_building = building_food_processing_center
		 	}
			remove_building = building_food_processing_center
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_mineral }
			has_building = building_mineral_purification_plant
		 	}
			remove_building = building_mineral_purification_plant
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_mineral }
			has_building = building_mineral_purification_hub
		 	}
			remove_building = building_mineral_purification_hub
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_energy }
			has_building = building_energy_grid
		 	}
			remove_building = building_energy_grid
		}
		else_if = { limit = { 
			NOT = { has_planet_flag = pab_energy }
			has_building = building_energy_nexus
		 	}
			remove_building = building_energy_nexus
		}
}

pab_delete_wrong_focus_districts = {

	if = {
		limit = { 
			NOT = { has_planet_flag = pab_mineral } 
			num_districts = {
				type = district_mining
				value > 0
			}
		}
		remove_district = district_mining
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_mineral } 
			OR = {
                is_planet_class = pc_hive
                is_planet_class = pc_machine 
            }
			num_districts = {
				type = district_mining_uncapped
				value > 0
			}
		}
		remove_district = district_mining_uncapped
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_energy } 
			num_districts = {
				type = district_generator
				value > 0
			}
		}
		remove_district = district_generator
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_energy } 
			OR = {
                is_planet_class = pc_hive
                is_planet_class = pc_machine 
                is_planet_class = pc_ringworld_habitable
            }
			num_districts = {
				type = district_generator_uncapped
				value > 0
			}
		}
		remove_district = district_generator_uncapped
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_energy } 
			num_districts = {
				type = district_hab_energy
				value > 0
			}
		}
		remove_district = district_hab_energy
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_food } 
			num_districts = {
				type = district_farming
				value > 0
			}
		}
		remove_district = district_farming
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_food } 
			OR = {
                is_planet_class = pc_hive
                is_planet_class = pc_ringworld_habitable
            }
			num_districts = {
				type = district_farming_uncapped
				value > 0
			}
		}
		remove_district = district_farming_uncapped
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_research } 
			num_districts = {
				type = district_hab_science
				value > 0
			}
		}
		remove_district = district_hab_science
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_alloy } 
			num_districts = {
				type = district_arcology_arms_industry
				value > 0
			}
		}
		remove_district = district_arcology_arms_industry
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_consumer } 
			num_districts = {
				type = district_arcology_civilian_industry
				value > 0
			}
		}
		remove_district = district_arcology_civilian_industry
	}
	else_if = {
		limit = { 
			NOT = { has_planet_flag = pab_trade } 
			num_districts = {
				type = district_hab_commercial
				value > 0
			}
		}
		remove_district = district_hab_commercial
	}
}